{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{createChart,ColorType,CrosshairMode,LineStyle,PriceScaleMode}from'lightweight-charts';import{Cog6ToothIcon,ChartBarIcon,PlayIcon,PauseIcon,MagnifyingGlassIcon,PlusIcon,EyeIcon,EyeSlashIcon,AdjustmentsHorizontalIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TradingChart=_ref=>{let{symbol='NQ=F',height=600,apiBaseUrl='',onSignalReceived}=_ref;const chartContainerRef=useRef(null);const chartRef=useRef(null);const candlestickSeriesRef=useRef(null);const volumeSeriesRef=useRef(null);const indicatorSeriesRefs=useRef({});const[isPlaying,setIsPlaying]=useState(true);const[timeframe,setTimeframe]=useState('5m');const[chartType,setChartType]=useState('candlestick');const[showDrawingTools,setShowDrawingTools]=useState(false);const[showIndicatorSearch,setShowIndicatorSearch]=useState(false);const[indicatorSearchTerm,setIndicatorSearchTerm]=useState('');const[indicators,setIndicators]=useState({sma20:{enabled:true,visible:true,color:'#f59e0b',period:20},sma50:{enabled:true,visible:true,color:'#8b5cf6',period:50},ema12:{enabled:false,visible:true,color:'#06b6d4',period:12},ema26:{enabled:false,visible:true,color:'#f97316',period:26},rsi:{enabled:false,visible:true,color:'#a855f7',period:14,overbought:70,oversold:30},macd:{enabled:false,visible:true,color:'#10b981',fastPeriod:12,slowPeriod:26,signalPeriod:9},bollinger:{enabled:false,visible:true,color:'#ef4444',period:20,stdDev:2},volume:{enabled:true,visible:true,color:'#6b7280'},stochastic:{enabled:false,visible:true,color:'#ec4899',kPeriod:14,dPeriod:3},williams:{enabled:false,visible:true,color:'#84cc16',period:14},atr:{enabled:false,visible:true,color:'#f59e0b',period:14},adx:{enabled:false,visible:true,color:'#6366f1',period:14}});const[tradeSignals,setTradeSignals]=useState([]);const[currentPrice,setCurrentPrice]=useState(null);const[priceChange,setPriceChange]=useState(0);const[limitOrders,setLimitOrders]=useState([]);const[,setChartData]=useState([]);// Available timeframes\nconst timeframes=[{value:'1m',label:'1m',seconds:60},{value:'5m',label:'5m',seconds:300},{value:'15m',label:'15m',seconds:900},{value:'30m',label:'30m',seconds:1800},{value:'1h',label:'1H',seconds:3600},{value:'4h',label:'4H',seconds:14400},{value:'1d',label:'1D',seconds:86400}];// Available indicators for search\nconst availableIndicators=[{key:'sma20',name:'Simple Moving Average (20)',category:'Moving Averages'},{key:'sma50',name:'Simple Moving Average (50)',category:'Moving Averages'},{key:'ema12',name:'Exponential Moving Average (12)',category:'Moving Averages'},{key:'ema26',name:'Exponential Moving Average (26)',category:'Moving Averages'},{key:'rsi',name:'Relative Strength Index',category:'Oscillators'},{key:'macd',name:'MACD',category:'Oscillators'},{key:'bollinger',name:'Bollinger Bands',category:'Volatility'},{key:'stochastic',name:'Stochastic Oscillator',category:'Oscillators'},{key:'williams',name:'Williams %R',category:'Oscillators'},{key:'atr',name:'Average True Range',category:'Volatility'},{key:'adx',name:'Average Directional Index',category:'Trend'},{key:'volume',name:'Volume',category:'Volume'}];// Initialize chart\nuseEffect(()=>{if(!chartContainerRef.current)return;const chart=createChart(chartContainerRef.current,{layout:{background:{type:ColorType.Solid,color:'#0a0a0b'},textColor:'#f9fafb',fontSize:12,fontFamily:'Trebuchet MS'},grid:{vertLines:{color:'rgba(55, 65, 81, 0.5)',style:LineStyle.Dotted},horzLines:{color:'rgba(55, 65, 81, 0.5)',style:LineStyle.Dotted}},crosshair:{mode:CrosshairMode.Normal,vertLine:{color:'#14b8a6',width:1,style:LineStyle.Dashed,labelBackgroundColor:'#14b8a6'},horzLine:{color:'#14b8a6',width:1,style:LineStyle.Dashed,labelBackgroundColor:'#14b8a6'}},rightPriceScale:{borderColor:'#374151',textColor:'#9ca3af',entireTextOnly:true,scaleMargins:{top:0.1,bottom:0.25}},leftPriceScale:{visible:false},timeScale:{borderColor:'#374151',textColor:'#9ca3af',timeVisible:true,secondsVisible:false,tickMarkFormatter:time=>{const date=new Date(time*1000);return date.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit',hour12:false});}},width:chartContainerRef.current.clientWidth,height:height,handleScroll:{mouseWheel:true,pressedMouseMove:true,horzTouchDrag:true,vertTouchDrag:true},handleScale:{axisPressedMouseMove:true,mouseWheel:true,pinch:true}});chartRef.current=chart;// Main price series\nlet mainSeries;if(chartType==='candlestick'){mainSeries=chart.addCandlestickSeries({upColor:'#26a69a',downColor:'#ef5350',borderVisible:false,wickUpColor:'#26a69a',wickDownColor:'#ef5350'});}else if(chartType==='line'){mainSeries=chart.addLineSeries({color:'#14b8a6',lineWidth:2,crosshairMarkerVisible:true,crosshairMarkerRadius:6,crosshairMarkerBorderColor:'#14b8a6',crosshairMarkerBackgroundColor:'#14b8a6'});}else if(chartType==='area'){mainSeries=chart.addAreaSeries({topColor:'rgba(20, 184, 166, 0.4)',bottomColor:'rgba(20, 184, 166, 0.0)',lineColor:'#14b8a6',lineWidth:2,crosshairMarkerVisible:true});}candlestickSeriesRef.current=mainSeries;// Volume series\nconst volumeSeries=chart.addHistogramSeries({color:'rgba(107, 114, 128, 0.8)',priceFormat:{type:'volume'},priceScaleId:'volume'});volumeSeriesRef.current=volumeSeries;// Set up volume price scale\nchart.priceScale('volume').applyOptions({scaleMargins:{top:0.8,bottom:0},mode:PriceScaleMode.Percentage});// Handle resize\nconst handleResize=()=>{if(chartContainerRef.current){chart.applyOptions({width:chartContainerRef.current.clientWidth});}};window.addEventListener('resize',handleResize);return()=>{window.removeEventListener('resize',handleResize);// Clean up indicator series\nObject.values(indicatorSeriesRefs.current).forEach(series=>{if(series&&chart){try{chart.removeSeries(series);}catch(e){// Series may already be removed\n}}});indicatorSeriesRefs.current={};if(chart){chart.remove();}};},[height,chartType]);// WebSocket connection for real-time data\nuseEffect(()=>{if(!isPlaying||!candlestickSeriesRef.current)return;let ws;let reconnectTimeout;const connectWebSocket=()=>{try{// Try to connect to WebSocket for real-time data\nws=new WebSocket(`ws://localhost:8001/ws/market/${symbol}`);ws.onopen=()=>{console.log('WebSocket connected for real-time data');};ws.onmessage=event=>{const data=JSON.parse(event.data);if(data.type==='price_update'){updateRealTimePrice(data);}else if(data.type==='signal'){addTradeSignal(data.signal);if(onSignalReceived){onSignalReceived(data.signal);}}else if(data.type==='limit_order'){updateLimitOrders(data.orders);}};ws.onerror=error=>{console.error('WebSocket error:',error);};ws.onclose=()=>{console.log('WebSocket disconnected, attempting to reconnect...');reconnectTimeout=setTimeout(connectWebSocket,3000);};}catch(error){console.error('Failed to connect WebSocket:',error);fetchHistoricalData();}};const fetchHistoricalData=async()=>{try{const timeframeConfig=timeframes.find(tf=>tf.value===timeframe);const interval=(timeframeConfig===null||timeframeConfig===void 0?void 0:timeframeConfig.value)||'5m';// Fetch historical data\nconst historicalResponse=await fetch(`${apiBaseUrl}/api/market/historical?symbol=${symbol}&period=1d&interval=${interval}`);if(historicalResponse.ok){const historicalData=await historicalResponse.json();if(historicalData!==null&&historicalData!==void 0&&historicalData.data&&Array.isArray(historicalData.data)){const ohlcData=historicalData.data.map(item=>({time:Math.floor(new Date(item.date).getTime()/1000),open:parseFloat(item.open),high:parseFloat(item.high),low:parseFloat(item.low),close:parseFloat(item.close),volume:parseFloat(item.volume||Math.floor(1000+Math.random()*5000))})).sort((a,b)=>a.time-b.time);if(ohlcData.length>0){setChartData(ohlcData);updateChartSeries(ohlcData);setCurrentPrice(ohlcData[ohlcData.length-1].close);return;}}}// Fallback to current price endpoint\nconst response=await fetch(`${apiBaseUrl}/api/market/nq-price`);if(response.ok){const data=await response.json();setCurrentPrice(data.current_price);// Generate mock data for demo\nconst now=Date.now()/1000;const mockData=generateMockOHLCData(data.current_price,now);setChartData(mockData);updateChartSeries(mockData);}else{throw new Error('Failed to fetch current price');}}catch(error){console.error('Failed to fetch market data:',error);// Generate mock data as last resort\nconst now=Date.now()/1000;const mockData=generateMockOHLCData(16500,now);setChartData(mockData);updateChartSeries(mockData);setCurrentPrice(16500);}};// Try WebSocket first, fallback to HTTP\nconnectWebSocket();// Also fetch initial historical data\nfetchHistoricalData();return()=>{if(ws){ws.close();}if(reconnectTimeout){clearTimeout(reconnectTimeout);}};},[isPlaying,timeframe,symbol]);// Generate mock OHLC data for demonstration\nconst generateMockOHLCData=(currentPrice,endTime)=>{const data=[];let price=currentPrice-Math.random()*100;const timeframeConfig=timeframes.find(tf=>tf.value===timeframe);const intervalSeconds=(timeframeConfig===null||timeframeConfig===void 0?void 0:timeframeConfig.seconds)||300;const periods=Math.min(200,Math.floor(86400/intervalSeconds));// Max 200 periods or 1 day\nfor(let i=periods;i>=0;i--){const time=endTime-i*intervalSeconds;const open=price;const volatility=2+Math.random()*8;// Increased volatility for NQ\nconst high=open+Math.random()*volatility;const low=open-Math.random()*volatility;const close=low+Math.random()*(high-low);const volume=Math.floor(500+Math.random()*3000);data.push({time:Math.floor(time),open:parseFloat(open.toFixed(2)),high:parseFloat(high.toFixed(2)),low:parseFloat(low.toFixed(2)),close:parseFloat(close.toFixed(2)),volume:volume});// Add some trend to make it more realistic\nprice=close+(Math.random()-0.5)*2;}return data;};// Update chart series with new data\nconst updateChartSeries=useCallback(ohlcData=>{if(!candlestickSeriesRef.current||!volumeSeriesRef.current)return;// Update main series based on chart type\nif(chartType==='candlestick'){candlestickSeriesRef.current.setData(ohlcData);}else if(chartType==='line'){const lineData=ohlcData.map(item=>({time:item.time,value:item.close}));candlestickSeriesRef.current.setData(lineData);}else if(chartType==='area'){const areaData=ohlcData.map(item=>({time:item.time,value:item.close}));candlestickSeriesRef.current.setData(areaData);}// Update volume\nif(indicators.volume.enabled){const volumeData=ohlcData.map(item=>({time:item.time,value:item.volume,color:chartType==='candlestick'?item.close>=item.open?'rgba(38, 166, 154, 0.8)':'rgba(239, 83, 80, 0.8)':'rgba(107, 114, 128, 0.8)'}));volumeSeriesRef.current.setData(volumeData);}// Update all enabled indicators\nupdateIndicators(ohlcData);},[chartType,indicators]);// Update real-time price\nconst updateRealTimePrice=useCallback(priceData=>{if(!candlestickSeriesRef.current)return;const currentTime=Math.floor(Date.now()/1000);const newPoint={time:currentTime,...priceData};if(chartType==='candlestick'){candlestickSeriesRef.current.update(newPoint);}else{candlestickSeriesRef.current.update({time:currentTime,value:priceData.close});}setCurrentPrice(priceData.close);setPriceChange(priceData.change||0);},[chartType]);// Update limit orders display\nconst updateLimitOrders=useCallback(orders=>{setLimitOrders(orders);if(!candlestickSeriesRef.current)return;// Add price lines for limit orders\norders.forEach(order=>{// This would need to be implemented with price line API\nconsole.log('Limit order:',order);});},[]);// Update indicators based on settings\nconst updateIndicators=useCallback(ohlcData=>{if(!chartRef.current||!ohlcData.length)return;// Clear existing indicator series\nObject.keys(indicatorSeriesRefs.current).forEach(key=>{const series=indicatorSeriesRefs.current[key];if(series){try{chartRef.current.removeSeries(series);}catch(e){// Series may already be removed\n}}});indicatorSeriesRefs.current={};// Add enabled indicators\nObject.entries(indicators).forEach(_ref2=>{let[key,config]=_ref2;if(!config.enabled||!config.visible)return;try{if(key==='sma20'||key==='sma50'){const period=key==='sma20'?20:50;const smaData=calculateSMA(ohlcData,period);if(smaData.length>0){const series=chartRef.current.addLineSeries({color:config.color,lineWidth:2,title:`SMA ${period}`,lastValueVisible:true,priceLineVisible:false});series.setData(smaData);indicatorSeriesRefs.current[key]=series;}}else if(key==='ema12'||key==='ema26'){const period=config.period;const emaData=calculateEMA(ohlcData,period);if(emaData.length>0){const series=chartRef.current.addLineSeries({color:config.color,lineWidth:2,title:`EMA ${period}`,lastValueVisible:true,priceLineVisible:false});series.setData(emaData);indicatorSeriesRefs.current[key]=series;}}else if(key==='bollinger'){const bollingerData=calculateBollingerBands(ohlcData,config.period,config.stdDev);if(bollingerData.upper.length>0){// Upper band\nconst upperSeries=chartRef.current.addLineSeries({color:config.color,lineWidth:1,title:'BB Upper',lastValueVisible:false,priceLineVisible:false});upperSeries.setData(bollingerData.upper);// Lower band\nconst lowerSeries=chartRef.current.addLineSeries({color:config.color,lineWidth:1,title:'BB Lower',lastValueVisible:false,priceLineVisible:false});lowerSeries.setData(bollingerData.lower);// Middle line (SMA)\nconst middleSeries=chartRef.current.addLineSeries({color:config.color,lineWidth:1,title:'BB Middle',lastValueVisible:false,priceLineVisible:false});middleSeries.setData(bollingerData.middle);indicatorSeriesRefs.current[key]={upper:upperSeries,lower:lowerSeries,middle:middleSeries};}}// Add more indicators as needed (RSI, MACD would need separate price scales)\n}catch(error){console.error(`Error adding indicator ${key}:`,error);}});},[indicators]);// Technical Analysis Functions\nconst calculateSMA=(data,period)=>{const result=[];for(let i=period-1;i<data.length;i++){let sum=0;for(let j=0;j<period;j++){sum+=data[i-j].close;}result.push({time:data[i].time,value:parseFloat((sum/period).toFixed(2))});}return result;};const calculateEMA=(data,period)=>{var _data$;const result=[];const multiplier=2/(period+1);let ema=((_data$=data[0])===null||_data$===void 0?void 0:_data$.close)||0;for(let i=0;i<data.length;i++){if(i===0){ema=data[i].close;}else{ema=data[i].close*multiplier+ema*(1-multiplier);}result.push({time:data[i].time,value:parseFloat(ema.toFixed(2))});}return result;};const calculateBollingerBands=(data,period,stdDev)=>{const smaData=calculateSMA(data,period);const upper=[];const lower=[];const middle=[];for(let i=period-1;i<data.length;i++){var _smaData;const smaValue=((_smaData=smaData[i-period+1])===null||_smaData===void 0?void 0:_smaData.value)||0;// Calculate standard deviation\nlet sum=0;for(let j=0;j<period;j++){const diff=data[i-j].close-smaValue;sum+=diff*diff;}const variance=sum/period;const standardDeviation=Math.sqrt(variance);const upperValue=smaValue+standardDeviation*stdDev;const lowerValue=smaValue-standardDeviation*stdDev;upper.push({time:data[i].time,value:parseFloat(upperValue.toFixed(2))});lower.push({time:data[i].time,value:parseFloat(lowerValue.toFixed(2))});middle.push({time:data[i].time,value:parseFloat(smaValue.toFixed(2))});}return{upper,lower,middle};};const calculateRSI=(data,period)=>{// RSI calculation implementation\n// This would be displayed on a separate price scale\nreturn[];};const calculateMACD=(data,fastPeriod,slowPeriod,signalPeriod)=>{// MACD calculation implementation\n// This would be displayed on a separate price scale\nreturn{macd:[],signal:[],histogram:[]};};// Add trade signal marker\nconst addTradeSignal=useCallback(signal=>{if(!candlestickSeriesRef.current)return;const marker={time:signal.time||Math.floor(Date.now()/1000),position:signal.type==='buy'?'belowBar':'aboveBar',color:signal.type==='buy'?'#26a69a':'#ef5350',shape:signal.type==='buy'?'arrowUp':'arrowDown',text:`${signal.type.toUpperCase()}${signal.price?`: $${signal.price}`:''}${signal.confidence?` (${Math.round(signal.confidence*100)}%)`:''}`,size:signal.strength||1};setTradeSignals(prev=>{const newSignals=[...prev,marker];candlestickSeriesRef.current.setMarkers(newSignals);return newSignals;});},[]);// Toggle indicator\nconst toggleIndicator=useCallback(indicator=>{setIndicators(prev=>({...prev,[indicator]:{...prev[indicator],enabled:!prev[indicator].enabled}}));},[]);// Toggle indicator visibility\nconst toggleIndicatorVisibility=useCallback(indicator=>{setIndicators(prev=>({...prev,[indicator]:{...prev[indicator],visible:!prev[indicator].visible}}));},[]);// Change timeframe\nconst changeTimeframe=useCallback(newTimeframe=>{setTimeframe(newTimeframe);},[]);// Change chart type\nconst changeChartType=useCallback(newType=>{setChartType(newType);},[]);// Filter indicators for search\nconst filteredIndicators=availableIndicators.filter(indicator=>indicator.name.toLowerCase().includes(indicatorSearchTerm.toLowerCase()));// Add indicator from search\nconst addIndicatorFromSearch=useCallback(indicatorKey=>{setIndicators(prev=>({...prev,[indicatorKey]:{...prev[indicatorKey],enabled:true,visible:true}}));setShowIndicatorSearch(false);setIndicatorSearchTerm('');},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 rounded-lg border border-gray-700 flex flex-col h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white\",children:symbol}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-1\",children:timeframes.map(tf=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeTimeframe(tf.value),className:`px-2 py-1 text-xs rounded transition-colors ${timeframe===tf.value?'bg-blue-600 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,children:tf.label},tf.value))})]}),currentPrice&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-mono text-white\",children:[\"$\",currentPrice.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})]}),/*#__PURE__*/_jsxs(\"span\",{className:`text-sm font-medium flex items-center ${priceChange>=0?'text-green-400':'text-red-400'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:`mr-1 ${priceChange>=0?'↗':'↘'}`,children:priceChange>=0?'▲':'▼'}),priceChange>=0?'+':'',priceChange.toFixed(2)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-1 mr-2\",children:['candlestick','line','area'].map(type=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>changeChartType(type),className:`p-2 rounded-lg transition-colors ${chartType===type?'bg-blue-600 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,title:type.charAt(0).toUpperCase()+type.slice(1),children:/*#__PURE__*/_jsx(ChartBarIcon,{className:\"w-4 h-4\"})},type))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDrawingTools(!showDrawingTools),className:`p-2 rounded-lg transition-colors ${showDrawingTools?'bg-blue-600 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,title:\"Drawing Tools\",children:/*#__PURE__*/_jsx(AdjustmentsHorizontalIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowIndicatorSearch(!showIndicatorSearch),className:\"p-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors\",title:\"Add Indicator\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsPlaying(!isPlaying),className:\"p-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors\",title:isPlaying?'Pause':'Resume',children:isPlaying?/*#__PURE__*/_jsx(PauseIcon,{className:\"w-4 h-4 text-white\"}):/*#__PURE__*/_jsx(PlayIcon,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors\",title:\"Settings\",children:/*#__PURE__*/_jsx(Cog6ToothIcon,{className:\"w-4 h-4\"})})]})]}),showIndicatorSearch&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-16 right-4 z-50 bg-gray-800 border border-gray-600 rounded-lg shadow-xl p-4 w-80\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-3\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search indicators...\",value:indicatorSearchTerm,onChange:e=>setIndicatorSearchTerm(e.target.value),className:\"flex-1 bg-gray-700 text-white placeholder-gray-400 border border-gray-600 rounded px-2 py-1 text-sm\",autoFocus:true}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowIndicatorSearch(false),className:\"text-gray-400 hover:text-white\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-64 overflow-y-auto\",children:filteredIndicators.map(indicator=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-1\",children:indicator.category}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addIndicatorFromSearch(indicator.key),className:\"w-full text-left p-2 text-sm text-white hover:bg-gray-700 rounded\",children:indicator.name})]},indicator.key))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border-b border-gray-700 bg-gray-850\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:Object.entries(indicators).map(_ref3=>{let[key,config]=_ref3;return config.enabled&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleIndicator(key),className:`px-3 py-1 text-xs rounded-full border transition-colors ${config.enabled&&config.visible?'bg-blue-600 border-blue-600 text-white':'bg-transparent border-gray-600 text-gray-400 hover:border-blue-500'}`,style:{borderColor:config.visible?config.color:undefined},children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-2 h-2 rounded-full mr-1\",style:{backgroundColor:config.color}}),key.toUpperCase()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleIndicatorVisibility(key),className:\"p-1 text-gray-400 hover:text-white\",title:config.visible?'Hide':'Show',children:config.visible?/*#__PURE__*/_jsx(EyeIcon,{className:\"w-3 h-3\"}):/*#__PURE__*/_jsx(EyeSlashIcon,{className:\"w-3 h-3\"})})]},key);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"div\",{ref:chartContainerRef,className:\"absolute inset-0\"}),limitOrders.map((order,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-4 bg-yellow-600 text-white text-xs px-2 py-1 rounded\",style:{top:`${order.yPosition||50}%`},children:[\"Limit \",order.type,\": $\",order.price]},index))]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 border-t border-gray-700 bg-gray-800\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs text-gray-400\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Live\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Interval: \",timeframe]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-400 rounded-full mr-1\"}),\"Connected\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Signals: \",tradeSignals.length]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Orders: \",limitOrders.length]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Last: \",new Date().toLocaleTimeString()]})]})]})})]});};export default TradingChart;// Helper function to format numbers\nconst formatPrice=price=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',minimumFractionDigits:2,maximumFractionDigits:2}).format(price);};// Export for use in other components\nexport{formatPrice};","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","createChart","ColorType","CrosshairMode","LineStyle","PriceScaleMode","Cog6ToothIcon","ChartBarIcon","PlayIcon","PauseIcon","MagnifyingGlassIcon","PlusIcon","EyeIcon","EyeSlashIcon","AdjustmentsHorizontalIcon","jsx","_jsx","jsxs","_jsxs","TradingChart","_ref","symbol","height","apiBaseUrl","onSignalReceived","chartContainerRef","chartRef","candlestickSeriesRef","volumeSeriesRef","indicatorSeriesRefs","isPlaying","setIsPlaying","timeframe","setTimeframe","chartType","setChartType","showDrawingTools","setShowDrawingTools","showIndicatorSearch","setShowIndicatorSearch","indicatorSearchTerm","setIndicatorSearchTerm","indicators","setIndicators","sma20","enabled","visible","color","period","sma50","ema12","ema26","rsi","overbought","oversold","macd","fastPeriod","slowPeriod","signalPeriod","bollinger","stdDev","volume","stochastic","kPeriod","dPeriod","williams","atr","adx","tradeSignals","setTradeSignals","currentPrice","setCurrentPrice","priceChange","setPriceChange","limitOrders","setLimitOrders","setChartData","timeframes","value","label","seconds","availableIndicators","key","name","category","current","chart","layout","background","type","Solid","textColor","fontSize","fontFamily","grid","vertLines","style","Dotted","horzLines","crosshair","mode","Normal","vertLine","width","Dashed","labelBackgroundColor","horzLine","rightPriceScale","borderColor","entireTextOnly","scaleMargins","top","bottom","leftPriceScale","timeScale","timeVisible","secondsVisible","tickMarkFormatter","time","date","Date","toLocaleTimeString","hour","minute","hour12","clientWidth","handleScroll","mouseWheel","pressedMouseMove","horzTouchDrag","vertTouchDrag","handleScale","axisPressedMouseMove","pinch","mainSeries","addCandlestickSeries","upColor","downColor","borderVisible","wickUpColor","wickDownColor","addLineSeries","lineWidth","crosshairMarkerVisible","crosshairMarkerRadius","crosshairMarkerBorderColor","crosshairMarkerBackgroundColor","addAreaSeries","topColor","bottomColor","lineColor","volumeSeries","addHistogramSeries","priceFormat","priceScaleId","priceScale","applyOptions","Percentage","handleResize","window","addEventListener","removeEventListener","Object","values","forEach","series","removeSeries","e","remove","ws","reconnectTimeout","connectWebSocket","WebSocket","onopen","console","log","onmessage","event","data","JSON","parse","updateRealTimePrice","addTradeSignal","signal","updateLimitOrders","orders","onerror","error","onclose","setTimeout","fetchHistoricalData","timeframeConfig","find","tf","interval","historicalResponse","fetch","ok","historicalData","json","Array","isArray","ohlcData","map","item","Math","floor","getTime","open","parseFloat","high","low","close","random","sort","a","b","length","updateChartSeries","response","current_price","now","mockData","generateMockOHLCData","Error","clearTimeout","endTime","price","intervalSeconds","periods","min","i","volatility","push","toFixed","setData","lineData","areaData","volumeData","updateIndicators","priceData","currentTime","newPoint","update","change","order","keys","entries","_ref2","config","smaData","calculateSMA","title","lastValueVisible","priceLineVisible","emaData","calculateEMA","bollingerData","calculateBollingerBands","upper","upperSeries","lowerSeries","lower","middleSeries","middle","result","sum","j","_data$","multiplier","ema","_smaData","smaValue","diff","variance","standardDeviation","sqrt","upperValue","lowerValue","calculateRSI","calculateMACD","histogram","marker","position","shape","text","toUpperCase","confidence","round","size","strength","prev","newSignals","setMarkers","toggleIndicator","indicator","toggleIndicatorVisibility","changeTimeframe","newTimeframe","changeChartType","newType","filteredIndicators","filter","toLowerCase","includes","addIndicatorFromSearch","indicatorKey","className","children","onClick","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","charAt","slice","placeholder","onChange","target","autoFocus","_ref3","backgroundColor","ref","index","yPosition","formatPrice","Intl","NumberFormat","currency","format"],"sources":["/Users/wilderbaldwin/Dev/tragen/frontend/src/components/TradingChart.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { createChart, ColorType, CrosshairMode, LineStyle, PriceScaleMode } from 'lightweight-charts';\nimport {\n  Cog6ToothIcon,\n  ChartBarIcon,\n  PlayIcon,\n  PauseIcon,\n  MagnifyingGlassIcon,\n  PlusIcon,\n  EyeIcon,\n  EyeSlashIcon,\n  AdjustmentsHorizontalIcon,\n} from '@heroicons/react/24/outline';\n\nconst TradingChart = ({ symbol = 'NQ=F', height = 600, apiBaseUrl = '', onSignalReceived }) => {\n  const chartContainerRef = useRef(null);\n  const chartRef = useRef(null);\n  const candlestickSeriesRef = useRef(null);\n  const volumeSeriesRef = useRef(null);\n  const indicatorSeriesRefs = useRef({});\n  \n  const [isPlaying, setIsPlaying] = useState(true);\n  const [timeframe, setTimeframe] = useState('5m');\n  const [chartType, setChartType] = useState('candlestick');\n  const [showDrawingTools, setShowDrawingTools] = useState(false);\n  const [showIndicatorSearch, setShowIndicatorSearch] = useState(false);\n  const [indicatorSearchTerm, setIndicatorSearchTerm] = useState('');\n  \n  const [indicators, setIndicators] = useState({\n    sma20: { enabled: true, visible: true, color: '#f59e0b', period: 20 },\n    sma50: { enabled: true, visible: true, color: '#8b5cf6', period: 50 },\n    ema12: { enabled: false, visible: true, color: '#06b6d4', period: 12 },\n    ema26: { enabled: false, visible: true, color: '#f97316', period: 26 },\n    rsi: { enabled: false, visible: true, color: '#a855f7', period: 14, overbought: 70, oversold: 30 },\n    macd: { enabled: false, visible: true, color: '#10b981', fastPeriod: 12, slowPeriod: 26, signalPeriod: 9 },\n    bollinger: { enabled: false, visible: true, color: '#ef4444', period: 20, stdDev: 2 },\n    volume: { enabled: true, visible: true, color: '#6b7280' },\n    stochastic: { enabled: false, visible: true, color: '#ec4899', kPeriod: 14, dPeriod: 3 },\n    williams: { enabled: false, visible: true, color: '#84cc16', period: 14 },\n    atr: { enabled: false, visible: true, color: '#f59e0b', period: 14 },\n    adx: { enabled: false, visible: true, color: '#6366f1', period: 14 },\n  });\n  \n  const [tradeSignals, setTradeSignals] = useState([]);\n  const [currentPrice, setCurrentPrice] = useState(null);\n  const [priceChange, setPriceChange] = useState(0);\n  const [limitOrders, setLimitOrders] = useState([]);\n  const [, setChartData] = useState([]);\n  \n  // Available timeframes\n  const timeframes = [\n    { value: '1m', label: '1m', seconds: 60 },\n    { value: '5m', label: '5m', seconds: 300 },\n    { value: '15m', label: '15m', seconds: 900 },\n    { value: '30m', label: '30m', seconds: 1800 },\n    { value: '1h', label: '1H', seconds: 3600 },\n    { value: '4h', label: '4H', seconds: 14400 },\n    { value: '1d', label: '1D', seconds: 86400 },\n  ];\n\n  // Available indicators for search\n  const availableIndicators = [\n    { key: 'sma20', name: 'Simple Moving Average (20)', category: 'Moving Averages' },\n    { key: 'sma50', name: 'Simple Moving Average (50)', category: 'Moving Averages' },\n    { key: 'ema12', name: 'Exponential Moving Average (12)', category: 'Moving Averages' },\n    { key: 'ema26', name: 'Exponential Moving Average (26)', category: 'Moving Averages' },\n    { key: 'rsi', name: 'Relative Strength Index', category: 'Oscillators' },\n    { key: 'macd', name: 'MACD', category: 'Oscillators' },\n    { key: 'bollinger', name: 'Bollinger Bands', category: 'Volatility' },\n    { key: 'stochastic', name: 'Stochastic Oscillator', category: 'Oscillators' },\n    { key: 'williams', name: 'Williams %R', category: 'Oscillators' },\n    { key: 'atr', name: 'Average True Range', category: 'Volatility' },\n    { key: 'adx', name: 'Average Directional Index', category: 'Trend' },\n    { key: 'volume', name: 'Volume', category: 'Volume' },\n  ];\n\n  // Initialize chart\n  useEffect(() => {\n    if (!chartContainerRef.current) return;\n\n    const chart = createChart(chartContainerRef.current, {\n      layout: {\n        background: { type: ColorType.Solid, color: '#0a0a0b' },\n        textColor: '#f9fafb',\n        fontSize: 12,\n        fontFamily: 'Trebuchet MS',\n      },\n      grid: {\n        vertLines: { color: 'rgba(55, 65, 81, 0.5)', style: LineStyle.Dotted },\n        horzLines: { color: 'rgba(55, 65, 81, 0.5)', style: LineStyle.Dotted },\n      },\n      crosshair: {\n        mode: CrosshairMode.Normal,\n        vertLine: {\n          color: '#14b8a6',\n          width: 1,\n          style: LineStyle.Dashed,\n          labelBackgroundColor: '#14b8a6',\n        },\n        horzLine: {\n          color: '#14b8a6',\n          width: 1,\n          style: LineStyle.Dashed,\n          labelBackgroundColor: '#14b8a6',\n        },\n      },\n      rightPriceScale: {\n        borderColor: '#374151',\n        textColor: '#9ca3af',\n        entireTextOnly: true,\n        scaleMargins: {\n          top: 0.1,\n          bottom: 0.25,\n        },\n      },\n      leftPriceScale: {\n        visible: false,\n      },\n      timeScale: {\n        borderColor: '#374151',\n        textColor: '#9ca3af',\n        timeVisible: true,\n        secondsVisible: false,\n        tickMarkFormatter: (time) => {\n          const date = new Date(time * 1000);\n          return date.toLocaleTimeString('en-US', { \n            hour: '2-digit', \n            minute: '2-digit',\n            hour12: false \n          });\n        },\n      },\n      width: chartContainerRef.current.clientWidth,\n      height: height,\n      handleScroll: {\n        mouseWheel: true,\n        pressedMouseMove: true,\n        horzTouchDrag: true,\n        vertTouchDrag: true,\n      },\n      handleScale: {\n        axisPressedMouseMove: true,\n        mouseWheel: true,\n        pinch: true,\n      },\n    });\n\n    chartRef.current = chart;\n\n    // Main price series\n    let mainSeries;\n    if (chartType === 'candlestick') {\n      mainSeries = chart.addCandlestickSeries({\n        upColor: '#26a69a',\n        downColor: '#ef5350',\n        borderVisible: false,\n        wickUpColor: '#26a69a',\n        wickDownColor: '#ef5350',\n      });\n    } else if (chartType === 'line') {\n      mainSeries = chart.addLineSeries({\n        color: '#14b8a6',\n        lineWidth: 2,\n        crosshairMarkerVisible: true,\n        crosshairMarkerRadius: 6,\n        crosshairMarkerBorderColor: '#14b8a6',\n        crosshairMarkerBackgroundColor: '#14b8a6',\n      });\n    } else if (chartType === 'area') {\n      mainSeries = chart.addAreaSeries({\n        topColor: 'rgba(20, 184, 166, 0.4)',\n        bottomColor: 'rgba(20, 184, 166, 0.0)',\n        lineColor: '#14b8a6',\n        lineWidth: 2,\n        crosshairMarkerVisible: true,\n      });\n    }\n\n    candlestickSeriesRef.current = mainSeries;\n\n    // Volume series\n    const volumeSeries = chart.addHistogramSeries({\n      color: 'rgba(107, 114, 128, 0.8)',\n      priceFormat: {\n        type: 'volume',\n      },\n      priceScaleId: 'volume',\n    });\n\n    volumeSeriesRef.current = volumeSeries;\n\n    // Set up volume price scale\n    chart.priceScale('volume').applyOptions({\n      scaleMargins: {\n        top: 0.8,\n        bottom: 0,\n      },\n      mode: PriceScaleMode.Percentage,\n    });\n\n    // Handle resize\n    const handleResize = () => {\n      if (chartContainerRef.current) {\n        chart.applyOptions({\n          width: chartContainerRef.current.clientWidth,\n        });\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      // Clean up indicator series\n      Object.values(indicatorSeriesRefs.current).forEach(series => {\n        if (series && chart) {\n          try {\n            chart.removeSeries(series);\n          } catch (e) {\n            // Series may already be removed\n          }\n        }\n      });\n      indicatorSeriesRefs.current = {};\n      if (chart) {\n        chart.remove();\n      }\n    };\n  }, [height, chartType]);\n\n  // WebSocket connection for real-time data\n  useEffect(() => {\n    if (!isPlaying || !candlestickSeriesRef.current) return;\n\n    let ws;\n    let reconnectTimeout;\n\n    const connectWebSocket = () => {\n      try {\n        // Try to connect to WebSocket for real-time data\n        ws = new WebSocket(`ws://localhost:8001/ws/market/${symbol}`);\n        \n        ws.onopen = () => {\n          console.log('WebSocket connected for real-time data');\n        };\n\n        ws.onmessage = (event) => {\n          const data = JSON.parse(event.data);\n          if (data.type === 'price_update') {\n            updateRealTimePrice(data);\n          } else if (data.type === 'signal') {\n            addTradeSignal(data.signal);\n            if (onSignalReceived) {\n              onSignalReceived(data.signal);\n            }\n          } else if (data.type === 'limit_order') {\n            updateLimitOrders(data.orders);\n          }\n        };\n\n        ws.onerror = (error) => {\n          console.error('WebSocket error:', error);\n        };\n\n        ws.onclose = () => {\n          console.log('WebSocket disconnected, attempting to reconnect...');\n          reconnectTimeout = setTimeout(connectWebSocket, 3000);\n        };\n      } catch (error) {\n        console.error('Failed to connect WebSocket:', error);\n        fetchHistoricalData();\n      }\n    };\n\n    const fetchHistoricalData = async () => {\n      try {\n        const timeframeConfig = timeframes.find(tf => tf.value === timeframe);\n        const interval = timeframeConfig?.value || '5m';\n        \n        // Fetch historical data\n        const historicalResponse = await fetch(\n          `${apiBaseUrl}/api/market/historical?symbol=${symbol}&period=1d&interval=${interval}`\n        );\n        \n        if (historicalResponse.ok) {\n          const historicalData = await historicalResponse.json();\n          \n          if (historicalData?.data && Array.isArray(historicalData.data)) {\n            const ohlcData = historicalData.data.map(item => ({\n              time: Math.floor(new Date(item.date).getTime() / 1000),\n              open: parseFloat(item.open),\n              high: parseFloat(item.high),\n              low: parseFloat(item.low),\n              close: parseFloat(item.close),\n              volume: parseFloat(item.volume || Math.floor(1000 + Math.random() * 5000))\n            })).sort((a, b) => a.time - b.time);\n            \n            if (ohlcData.length > 0) {\n              setChartData(ohlcData);\n              updateChartSeries(ohlcData);\n              setCurrentPrice(ohlcData[ohlcData.length - 1].close);\n              return;\n            }\n          }\n        }\n        \n        // Fallback to current price endpoint\n        const response = await fetch(`${apiBaseUrl}/api/market/nq-price`);\n        if (response.ok) {\n          const data = await response.json();\n          setCurrentPrice(data.current_price);\n          \n          // Generate mock data for demo\n          const now = Date.now() / 1000;\n          const mockData = generateMockOHLCData(data.current_price, now);\n          setChartData(mockData);\n          updateChartSeries(mockData);\n        } else {\n          throw new Error('Failed to fetch current price');\n        }\n        \n      } catch (error) {\n        console.error('Failed to fetch market data:', error);\n        // Generate mock data as last resort\n        const now = Date.now() / 1000;\n        const mockData = generateMockOHLCData(16500, now);\n        setChartData(mockData);\n        updateChartSeries(mockData);\n        setCurrentPrice(16500);\n      }\n    };\n\n    // Try WebSocket first, fallback to HTTP\n    connectWebSocket();\n    \n    // Also fetch initial historical data\n    fetchHistoricalData();\n\n    return () => {\n      if (ws) {\n        ws.close();\n      }\n      if (reconnectTimeout) {\n        clearTimeout(reconnectTimeout);\n      }\n    };\n  }, [isPlaying, timeframe, symbol]);\n\n  // Generate mock OHLC data for demonstration\n  const generateMockOHLCData = (currentPrice, endTime) => {\n    const data = [];\n    let price = currentPrice - Math.random() * 100;\n    const timeframeConfig = timeframes.find(tf => tf.value === timeframe);\n    const intervalSeconds = timeframeConfig?.seconds || 300;\n    const periods = Math.min(200, Math.floor(86400 / intervalSeconds)); // Max 200 periods or 1 day\n    \n    for (let i = periods; i >= 0; i--) {\n      const time = endTime - (i * intervalSeconds);\n      const open = price;\n      const volatility = 2 + Math.random() * 8; // Increased volatility for NQ\n      const high = open + Math.random() * volatility;\n      const low = open - Math.random() * volatility;\n      const close = low + Math.random() * (high - low);\n      const volume = Math.floor(500 + Math.random() * 3000);\n      \n      data.push({\n        time: Math.floor(time),\n        open: parseFloat(open.toFixed(2)),\n        high: parseFloat(high.toFixed(2)),\n        low: parseFloat(low.toFixed(2)),\n        close: parseFloat(close.toFixed(2)),\n        volume: volume,\n      });\n      \n      // Add some trend to make it more realistic\n      price = close + (Math.random() - 0.5) * 2;\n    }\n    \n    return data;\n  };\n\n  // Update chart series with new data\n  const updateChartSeries = useCallback((ohlcData) => {\n    if (!candlestickSeriesRef.current || !volumeSeriesRef.current) return;\n\n    // Update main series based on chart type\n    if (chartType === 'candlestick') {\n      candlestickSeriesRef.current.setData(ohlcData);\n    } else if (chartType === 'line') {\n      const lineData = ohlcData.map(item => ({\n        time: item.time,\n        value: item.close,\n      }));\n      candlestickSeriesRef.current.setData(lineData);\n    } else if (chartType === 'area') {\n      const areaData = ohlcData.map(item => ({\n        time: item.time,\n        value: item.close,\n      }));\n      candlestickSeriesRef.current.setData(areaData);\n    }\n\n    // Update volume\n    if (indicators.volume.enabled) {\n      const volumeData = ohlcData.map(item => ({\n        time: item.time,\n        value: item.volume,\n        color: (chartType === 'candlestick' ? \n          (item.close >= item.open ? 'rgba(38, 166, 154, 0.8)' : 'rgba(239, 83, 80, 0.8)') :\n          'rgba(107, 114, 128, 0.8)'),\n      }));\n      volumeSeriesRef.current.setData(volumeData);\n    }\n\n    // Update all enabled indicators\n    updateIndicators(ohlcData);\n  }, [chartType, indicators]);\n\n  // Update real-time price\n  const updateRealTimePrice = useCallback((priceData) => {\n    if (!candlestickSeriesRef.current) return;\n\n    const currentTime = Math.floor(Date.now() / 1000);\n    const newPoint = {\n      time: currentTime,\n      ...priceData,\n    };\n\n    if (chartType === 'candlestick') {\n      candlestickSeriesRef.current.update(newPoint);\n    } else {\n      candlestickSeriesRef.current.update({\n        time: currentTime,\n        value: priceData.close,\n      });\n    }\n\n    setCurrentPrice(priceData.close);\n    setPriceChange(priceData.change || 0);\n  }, [chartType]);\n\n  // Update limit orders display\n  const updateLimitOrders = useCallback((orders) => {\n    setLimitOrders(orders);\n    \n    if (!candlestickSeriesRef.current) return;\n\n    // Add price lines for limit orders\n    orders.forEach(order => {\n      // This would need to be implemented with price line API\n      console.log('Limit order:', order);\n    });\n  }, []);\n\n  // Update indicators based on settings\n  const updateIndicators = useCallback((ohlcData) => {\n    if (!chartRef.current || !ohlcData.length) return;\n\n    // Clear existing indicator series\n    Object.keys(indicatorSeriesRefs.current).forEach(key => {\n      const series = indicatorSeriesRefs.current[key];\n      if (series) {\n        try {\n          chartRef.current.removeSeries(series);\n        } catch (e) {\n          // Series may already be removed\n        }\n      }\n    });\n    indicatorSeriesRefs.current = {};\n\n    // Add enabled indicators\n    Object.entries(indicators).forEach(([key, config]) => {\n      if (!config.enabled || !config.visible) return;\n\n      try {\n        if (key === 'sma20' || key === 'sma50') {\n          const period = key === 'sma20' ? 20 : 50;\n          const smaData = calculateSMA(ohlcData, period);\n          if (smaData.length > 0) {\n            const series = chartRef.current.addLineSeries({\n              color: config.color,\n              lineWidth: 2,\n              title: `SMA ${period}`,\n              lastValueVisible: true,\n              priceLineVisible: false,\n            });\n            series.setData(smaData);\n            indicatorSeriesRefs.current[key] = series;\n          }\n        } else if (key === 'ema12' || key === 'ema26') {\n          const period = config.period;\n          const emaData = calculateEMA(ohlcData, period);\n          if (emaData.length > 0) {\n            const series = chartRef.current.addLineSeries({\n              color: config.color,\n              lineWidth: 2,\n              title: `EMA ${period}`,\n              lastValueVisible: true,\n              priceLineVisible: false,\n            });\n            series.setData(emaData);\n            indicatorSeriesRefs.current[key] = series;\n          }\n        } else if (key === 'bollinger') {\n          const bollingerData = calculateBollingerBands(ohlcData, config.period, config.stdDev);\n          if (bollingerData.upper.length > 0) {\n            // Upper band\n            const upperSeries = chartRef.current.addLineSeries({\n              color: config.color,\n              lineWidth: 1,\n              title: 'BB Upper',\n              lastValueVisible: false,\n              priceLineVisible: false,\n            });\n            upperSeries.setData(bollingerData.upper);\n            \n            // Lower band\n            const lowerSeries = chartRef.current.addLineSeries({\n              color: config.color,\n              lineWidth: 1,\n              title: 'BB Lower',\n              lastValueVisible: false,\n              priceLineVisible: false,\n            });\n            lowerSeries.setData(bollingerData.lower);\n            \n            // Middle line (SMA)\n            const middleSeries = chartRef.current.addLineSeries({\n              color: config.color,\n              lineWidth: 1,\n              title: 'BB Middle',\n              lastValueVisible: false,\n              priceLineVisible: false,\n            });\n            middleSeries.setData(bollingerData.middle);\n            \n            indicatorSeriesRefs.current[key] = { upper: upperSeries, lower: lowerSeries, middle: middleSeries };\n          }\n        }\n        // Add more indicators as needed (RSI, MACD would need separate price scales)\n      } catch (error) {\n        console.error(`Error adding indicator ${key}:`, error);\n      }\n    });\n  }, [indicators]);\n\n  // Technical Analysis Functions\n  const calculateSMA = (data, period) => {\n    const result = [];\n    for (let i = period - 1; i < data.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < period; j++) {\n        sum += data[i - j].close;\n      }\n      result.push({\n        time: data[i].time,\n        value: parseFloat((sum / period).toFixed(2)),\n      });\n    }\n    return result;\n  };\n\n  const calculateEMA = (data, period) => {\n    const result = [];\n    const multiplier = 2 / (period + 1);\n    let ema = data[0]?.close || 0;\n    \n    for (let i = 0; i < data.length; i++) {\n      if (i === 0) {\n        ema = data[i].close;\n      } else {\n        ema = (data[i].close * multiplier) + (ema * (1 - multiplier));\n      }\n      \n      result.push({\n        time: data[i].time,\n        value: parseFloat(ema.toFixed(2)),\n      });\n    }\n    return result;\n  };\n\n  const calculateBollingerBands = (data, period, stdDev) => {\n    const smaData = calculateSMA(data, period);\n    const upper = [];\n    const lower = [];\n    const middle = [];\n    \n    for (let i = period - 1; i < data.length; i++) {\n      const smaValue = smaData[i - period + 1]?.value || 0;\n      \n      // Calculate standard deviation\n      let sum = 0;\n      for (let j = 0; j < period; j++) {\n        const diff = data[i - j].close - smaValue;\n        sum += diff * diff;\n      }\n      const variance = sum / period;\n      const standardDeviation = Math.sqrt(variance);\n      \n      const upperValue = smaValue + (standardDeviation * stdDev);\n      const lowerValue = smaValue - (standardDeviation * stdDev);\n      \n      upper.push({ time: data[i].time, value: parseFloat(upperValue.toFixed(2)) });\n      lower.push({ time: data[i].time, value: parseFloat(lowerValue.toFixed(2)) });\n      middle.push({ time: data[i].time, value: parseFloat(smaValue.toFixed(2)) });\n    }\n    \n    return { upper, lower, middle };\n  };\n\n  const calculateRSI = (data, period) => {\n    // RSI calculation implementation\n    // This would be displayed on a separate price scale\n    return [];\n  };\n\n  const calculateMACD = (data, fastPeriod, slowPeriod, signalPeriod) => {\n    // MACD calculation implementation\n    // This would be displayed on a separate price scale\n    return { macd: [], signal: [], histogram: [] };\n  };\n\n  // Add trade signal marker\n  const addTradeSignal = useCallback((signal) => {\n    if (!candlestickSeriesRef.current) return;\n    \n    const marker = {\n      time: signal.time || Math.floor(Date.now() / 1000),\n      position: signal.type === 'buy' ? 'belowBar' : 'aboveBar',\n      color: signal.type === 'buy' ? '#26a69a' : '#ef5350',\n      shape: signal.type === 'buy' ? 'arrowUp' : 'arrowDown',\n      text: `${signal.type.toUpperCase()}${signal.price ? `: $${signal.price}` : ''}${signal.confidence ? ` (${Math.round(signal.confidence * 100)}%)` : ''}`,\n      size: signal.strength || 1,\n    };\n    \n    setTradeSignals(prev => {\n      const newSignals = [...prev, marker];\n      candlestickSeriesRef.current.setMarkers(newSignals);\n      return newSignals;\n    });\n  }, []);\n\n  // Toggle indicator\n  const toggleIndicator = useCallback((indicator) => {\n    setIndicators(prev => ({\n      ...prev,\n      [indicator]: {\n        ...prev[indicator],\n        enabled: !prev[indicator].enabled,\n      },\n    }));\n  }, []);\n\n  // Toggle indicator visibility\n  const toggleIndicatorVisibility = useCallback((indicator) => {\n    setIndicators(prev => ({\n      ...prev,\n      [indicator]: {\n        ...prev[indicator],\n        visible: !prev[indicator].visible,\n      },\n    }));\n  }, []);\n\n  // Change timeframe\n  const changeTimeframe = useCallback((newTimeframe) => {\n    setTimeframe(newTimeframe);\n  }, []);\n\n  // Change chart type\n  const changeChartType = useCallback((newType) => {\n    setChartType(newType);\n  }, []);\n\n  // Filter indicators for search\n  const filteredIndicators = availableIndicators.filter(indicator =>\n    indicator.name.toLowerCase().includes(indicatorSearchTerm.toLowerCase())\n  );\n\n  // Add indicator from search\n  const addIndicatorFromSearch = useCallback((indicatorKey) => {\n    setIndicators(prev => ({\n      ...prev,\n      [indicatorKey]: {\n        ...prev[indicatorKey],\n        enabled: true,\n        visible: true,\n      },\n    }));\n    setShowIndicatorSearch(false);\n    setIndicatorSearchTerm('');\n  }, []);\n\n  return (\n    <div className=\"bg-gray-900 rounded-lg border border-gray-700 flex flex-col h-full\">\n      {/* Chart Header */}\n      <div className=\"flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800\">\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"flex items-center space-x-2\">\n            <h3 className=\"text-lg font-semibold text-white\">{symbol}</h3>\n            <div className=\"flex items-center space-x-1\">\n              {/* Timeframe Selector */}\n              {timeframes.map((tf) => (\n                <button\n                  key={tf.value}\n                  onClick={() => changeTimeframe(tf.value)}\n                  className={`px-2 py-1 text-xs rounded transition-colors ${\n                    timeframe === tf.value\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                  }`}\n                >\n                  {tf.label}\n                </button>\n              ))}\n            </div>\n          </div>\n          \n          {currentPrice && (\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"text-xl font-mono text-white\">\n                ${currentPrice.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n              </span>\n              <span className={`text-sm font-medium flex items-center ${\n                priceChange >= 0 ? 'text-green-400' : 'text-red-400'\n              }`}>\n                <span className={`mr-1 ${priceChange >= 0 ? '↗' : '↘'}`}>\n                  {priceChange >= 0 ? '▲' : '▼'}\n                </span>\n                {priceChange >= 0 ? '+' : ''}{priceChange.toFixed(2)}\n              </span>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          {/* Chart Type Selector */}\n          <div className=\"flex items-center space-x-1 mr-2\">\n            {['candlestick', 'line', 'area'].map((type) => (\n              <button\n                key={type}\n                onClick={() => changeChartType(type)}\n                className={`p-2 rounded-lg transition-colors ${\n                  chartType === type\n                    ? 'bg-blue-600 text-white'\n                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                }`}\n                title={type.charAt(0).toUpperCase() + type.slice(1)}\n              >\n                <ChartBarIcon className=\"w-4 h-4\" />\n              </button>\n            ))}\n          </div>\n          \n          {/* Drawing Tools Toggle */}\n          <button\n            onClick={() => setShowDrawingTools(!showDrawingTools)}\n            className={`p-2 rounded-lg transition-colors ${\n              showDrawingTools\n                ? 'bg-blue-600 text-white'\n                : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n            }`}\n            title=\"Drawing Tools\"\n          >\n            <AdjustmentsHorizontalIcon className=\"w-4 h-4\" />\n          </button>\n          \n          {/* Add Indicator Button */}\n          <button\n            onClick={() => setShowIndicatorSearch(!showIndicatorSearch)}\n            className=\"p-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors\"\n            title=\"Add Indicator\"\n          >\n            <PlusIcon className=\"w-4 h-4\" />\n          </button>\n          \n          {/* Play/Pause Button */}\n          <button\n            onClick={() => setIsPlaying(!isPlaying)}\n            className=\"p-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors\"\n            title={isPlaying ? 'Pause' : 'Resume'}\n          >\n            {isPlaying ? (\n              <PauseIcon className=\"w-4 h-4 text-white\" />\n            ) : (\n              <PlayIcon className=\"w-4 h-4 text-white\" />\n            )}\n          </button>\n          \n          {/* Settings Button */}\n          <button \n            className=\"p-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors\"\n            title=\"Settings\"\n          >\n            <Cog6ToothIcon className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Indicator Search Modal */}\n      {showIndicatorSearch && (\n        <div className=\"absolute top-16 right-4 z-50 bg-gray-800 border border-gray-600 rounded-lg shadow-xl p-4 w-80\">\n          <div className=\"flex items-center space-x-2 mb-3\">\n            <MagnifyingGlassIcon className=\"w-4 h-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search indicators...\"\n              value={indicatorSearchTerm}\n              onChange={(e) => setIndicatorSearchTerm(e.target.value)}\n              className=\"flex-1 bg-gray-700 text-white placeholder-gray-400 border border-gray-600 rounded px-2 py-1 text-sm\"\n              autoFocus\n            />\n            <button\n              onClick={() => setShowIndicatorSearch(false)}\n              className=\"text-gray-400 hover:text-white\"\n            >\n              ✕\n            </button>\n          </div>\n          <div className=\"max-h-64 overflow-y-auto\">\n            {filteredIndicators.map((indicator) => (\n              <div key={indicator.key} className=\"mb-2\">\n                <div className=\"text-xs text-gray-400 mb-1\">{indicator.category}</div>\n                <button\n                  onClick={() => addIndicatorFromSearch(indicator.key)}\n                  className=\"w-full text-left p-2 text-sm text-white hover:bg-gray-700 rounded\"\n                >\n                  {indicator.name}\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Indicators Panel */}\n      <div className=\"p-3 border-b border-gray-700 bg-gray-850\">\n        <div className=\"flex flex-wrap gap-2\">\n          {Object.entries(indicators).map(([key, config]) => (\n            config.enabled && (\n              <div key={key} className=\"flex items-center space-x-1\">\n                <button\n                  onClick={() => toggleIndicator(key)}\n                  className={`px-3 py-1 text-xs rounded-full border transition-colors ${\n                    config.enabled && config.visible\n                      ? 'bg-blue-600 border-blue-600 text-white'\n                      : 'bg-transparent border-gray-600 text-gray-400 hover:border-blue-500'\n                  }`}\n                  style={{ borderColor: config.visible ? config.color : undefined }}\n                >\n                  <span \n                    className=\"inline-block w-2 h-2 rounded-full mr-1\" \n                    style={{ backgroundColor: config.color }}\n                  />\n                  {key.toUpperCase()}\n                </button>\n                <button\n                  onClick={() => toggleIndicatorVisibility(key)}\n                  className=\"p-1 text-gray-400 hover:text-white\"\n                  title={config.visible ? 'Hide' : 'Show'}\n                >\n                  {config.visible ? (\n                    <EyeIcon className=\"w-3 h-3\" />\n                  ) : (\n                    <EyeSlashIcon className=\"w-3 h-3\" />\n                  )}\n                </button>\n              </div>\n            )\n          ))}\n        </div>\n      </div>\n\n      {/* Chart Container */}\n      <div className=\"flex-1 relative\">\n        <div \n          ref={chartContainerRef}\n          className=\"absolute inset-0\"\n        />\n        \n        {/* Limit Order Overlays */}\n        {limitOrders.map((order, index) => (\n          <div\n            key={index}\n            className=\"absolute right-4 bg-yellow-600 text-white text-xs px-2 py-1 rounded\"\n            style={{ top: `${order.yPosition || 50}%` }}\n          >\n            Limit {order.type}: ${order.price}\n          </div>\n        ))}\n      </div>\n      \n      {/* Chart Footer */}\n      <div className=\"p-3 border-t border-gray-700 bg-gray-800\">\n        <div className=\"flex items-center justify-between text-xs text-gray-400\">\n          <div className=\"flex items-center space-x-4\">\n            <span>Live</span>\n            <span>Interval: {timeframe}</span>\n            <span className=\"flex items-center\">\n              <span className=\"w-2 h-2 bg-green-400 rounded-full mr-1\"></span>\n              Connected\n            </span>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <span>Signals: {tradeSignals.length}</span>\n            <span>Orders: {limitOrders.length}</span>\n            <span>Last: {new Date().toLocaleTimeString()}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TradingChart;\n\n// Helper function to format numbers\nconst formatPrice = (price) => {\n  return new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  }).format(price);\n};\n\n// Export for use in other components\nexport { formatPrice };"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACvE,OAASC,WAAW,CAAEC,SAAS,CAAEC,aAAa,CAAEC,SAAS,CAAEC,cAAc,KAAQ,oBAAoB,CACrG,OACEC,aAAa,CACbC,YAAY,CACZC,QAAQ,CACRC,SAAS,CACTC,mBAAmB,CACnBC,QAAQ,CACRC,OAAO,CACPC,YAAY,CACZC,yBAAyB,KACpB,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErC,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAA0E,IAAzE,CAAEC,MAAM,CAAG,MAAM,CAAEC,MAAM,CAAG,GAAG,CAAEC,UAAU,CAAG,EAAE,CAAEC,gBAAiB,CAAC,CAAAJ,IAAA,CACxF,KAAM,CAAAK,iBAAiB,CAAG3B,MAAM,CAAC,IAAI,CAAC,CACtC,KAAM,CAAA4B,QAAQ,CAAG5B,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAAA6B,oBAAoB,CAAG7B,MAAM,CAAC,IAAI,CAAC,CACzC,KAAM,CAAA8B,eAAe,CAAG9B,MAAM,CAAC,IAAI,CAAC,CACpC,KAAM,CAAA+B,mBAAmB,CAAG/B,MAAM,CAAC,CAAC,CAAC,CAAC,CAEtC,KAAM,CAACgC,SAAS,CAAEC,YAAY,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACiC,SAAS,CAAEC,YAAY,CAAC,CAAGlC,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACmC,SAAS,CAAEC,YAAY,CAAC,CAAGpC,QAAQ,CAAC,aAAa,CAAC,CACzD,KAAM,CAACqC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGtC,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACuC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAGxC,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACyC,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CAElE,KAAM,CAAC2C,UAAU,CAAEC,aAAa,CAAC,CAAG5C,QAAQ,CAAC,CAC3C6C,KAAK,CAAE,CAAEC,OAAO,CAAE,IAAI,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACrEC,KAAK,CAAE,CAAEJ,OAAO,CAAE,IAAI,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACrEE,KAAK,CAAE,CAAEL,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACtEG,KAAK,CAAE,CAAEN,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACtEI,GAAG,CAAE,CAAEP,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAE,CAAEK,UAAU,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAClGC,IAAI,CAAE,CAAEV,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAES,UAAU,CAAE,EAAE,CAAEC,UAAU,CAAE,EAAE,CAAEC,YAAY,CAAE,CAAE,CAAC,CAC1GC,SAAS,CAAE,CAAEd,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAE,CAAEY,MAAM,CAAE,CAAE,CAAC,CACrFC,MAAM,CAAE,CAAEhB,OAAO,CAAE,IAAI,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAU,CAAC,CAC1De,UAAU,CAAE,CAAEjB,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEgB,OAAO,CAAE,EAAE,CAAEC,OAAO,CAAE,CAAE,CAAC,CACxFC,QAAQ,CAAE,CAAEpB,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACzEkB,GAAG,CAAE,CAAErB,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CAAC,CACpEmB,GAAG,CAAE,CAAEtB,OAAO,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAI,CAAEC,KAAK,CAAE,SAAS,CAAEC,MAAM,CAAE,EAAG,CACrE,CAAC,CAAC,CAEF,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGtE,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACuE,YAAY,CAAEC,eAAe,CAAC,CAAGxE,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACyE,WAAW,CAAEC,cAAc,CAAC,CAAG1E,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAC2E,WAAW,CAAEC,cAAc,CAAC,CAAG5E,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,EAAG6E,YAAY,CAAC,CAAG7E,QAAQ,CAAC,EAAE,CAAC,CAErC;AACA,KAAM,CAAA8E,UAAU,CAAG,CACjB,CAAEC,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,OAAO,CAAE,EAAG,CAAC,CACzC,CAAEF,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,OAAO,CAAE,GAAI,CAAC,CAC1C,CAAEF,KAAK,CAAE,KAAK,CAAEC,KAAK,CAAE,KAAK,CAAEC,OAAO,CAAE,GAAI,CAAC,CAC5C,CAAEF,KAAK,CAAE,KAAK,CAAEC,KAAK,CAAE,KAAK,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC7C,CAAEF,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,OAAO,CAAE,IAAK,CAAC,CAC3C,CAAEF,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,OAAO,CAAE,KAAM,CAAC,CAC5C,CAAEF,KAAK,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAI,CAAEC,OAAO,CAAE,KAAM,CAAC,CAC7C,CAED;AACA,KAAM,CAAAC,mBAAmB,CAAG,CAC1B,CAAEC,GAAG,CAAE,OAAO,CAAEC,IAAI,CAAE,4BAA4B,CAAEC,QAAQ,CAAE,iBAAkB,CAAC,CACjF,CAAEF,GAAG,CAAE,OAAO,CAAEC,IAAI,CAAE,4BAA4B,CAAEC,QAAQ,CAAE,iBAAkB,CAAC,CACjF,CAAEF,GAAG,CAAE,OAAO,CAAEC,IAAI,CAAE,iCAAiC,CAAEC,QAAQ,CAAE,iBAAkB,CAAC,CACtF,CAAEF,GAAG,CAAE,OAAO,CAAEC,IAAI,CAAE,iCAAiC,CAAEC,QAAQ,CAAE,iBAAkB,CAAC,CACtF,CAAEF,GAAG,CAAE,KAAK,CAAEC,IAAI,CAAE,yBAAyB,CAAEC,QAAQ,CAAE,aAAc,CAAC,CACxE,CAAEF,GAAG,CAAE,MAAM,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,aAAc,CAAC,CACtD,CAAEF,GAAG,CAAE,WAAW,CAAEC,IAAI,CAAE,iBAAiB,CAAEC,QAAQ,CAAE,YAAa,CAAC,CACrE,CAAEF,GAAG,CAAE,YAAY,CAAEC,IAAI,CAAE,uBAAuB,CAAEC,QAAQ,CAAE,aAAc,CAAC,CAC7E,CAAEF,GAAG,CAAE,UAAU,CAAEC,IAAI,CAAE,aAAa,CAAEC,QAAQ,CAAE,aAAc,CAAC,CACjE,CAAEF,GAAG,CAAE,KAAK,CAAEC,IAAI,CAAE,oBAAoB,CAAEC,QAAQ,CAAE,YAAa,CAAC,CAClE,CAAEF,GAAG,CAAE,KAAK,CAAEC,IAAI,CAAE,2BAA2B,CAAEC,QAAQ,CAAE,OAAQ,CAAC,CACpE,CAAEF,GAAG,CAAE,QAAQ,CAAEC,IAAI,CAAE,QAAQ,CAAEC,QAAQ,CAAE,QAAS,CAAC,CACtD,CAED;AACAvF,SAAS,CAAC,IAAM,CACd,GAAI,CAAC4B,iBAAiB,CAAC4D,OAAO,CAAE,OAEhC,KAAM,CAAAC,KAAK,CAAGrF,WAAW,CAACwB,iBAAiB,CAAC4D,OAAO,CAAE,CACnDE,MAAM,CAAE,CACNC,UAAU,CAAE,CAAEC,IAAI,CAAEvF,SAAS,CAACwF,KAAK,CAAE3C,KAAK,CAAE,SAAU,CAAC,CACvD4C,SAAS,CAAE,SAAS,CACpBC,QAAQ,CAAE,EAAE,CACZC,UAAU,CAAE,cACd,CAAC,CACDC,IAAI,CAAE,CACJC,SAAS,CAAE,CAAEhD,KAAK,CAAE,uBAAuB,CAAEiD,KAAK,CAAE5F,SAAS,CAAC6F,MAAO,CAAC,CACtEC,SAAS,CAAE,CAAEnD,KAAK,CAAE,uBAAuB,CAAEiD,KAAK,CAAE5F,SAAS,CAAC6F,MAAO,CACvE,CAAC,CACDE,SAAS,CAAE,CACTC,IAAI,CAAEjG,aAAa,CAACkG,MAAM,CAC1BC,QAAQ,CAAE,CACRvD,KAAK,CAAE,SAAS,CAChBwD,KAAK,CAAE,CAAC,CACRP,KAAK,CAAE5F,SAAS,CAACoG,MAAM,CACvBC,oBAAoB,CAAE,SACxB,CAAC,CACDC,QAAQ,CAAE,CACR3D,KAAK,CAAE,SAAS,CAChBwD,KAAK,CAAE,CAAC,CACRP,KAAK,CAAE5F,SAAS,CAACoG,MAAM,CACvBC,oBAAoB,CAAE,SACxB,CACF,CAAC,CACDE,eAAe,CAAE,CACfC,WAAW,CAAE,SAAS,CACtBjB,SAAS,CAAE,SAAS,CACpBkB,cAAc,CAAE,IAAI,CACpBC,YAAY,CAAE,CACZC,GAAG,CAAE,GAAG,CACRC,MAAM,CAAE,IACV,CACF,CAAC,CACDC,cAAc,CAAE,CACdnE,OAAO,CAAE,KACX,CAAC,CACDoE,SAAS,CAAE,CACTN,WAAW,CAAE,SAAS,CACtBjB,SAAS,CAAE,SAAS,CACpBwB,WAAW,CAAE,IAAI,CACjBC,cAAc,CAAE,KAAK,CACrBC,iBAAiB,CAAGC,IAAI,EAAK,CAC3B,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,IAAI,CAAG,IAAI,CAAC,CAClC,MAAO,CAAAC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAE,CACtCC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,KACV,CAAC,CAAC,CACJ,CACF,CAAC,CACDrB,KAAK,CAAE9E,iBAAiB,CAAC4D,OAAO,CAACwC,WAAW,CAC5CvG,MAAM,CAAEA,MAAM,CACdwG,YAAY,CAAE,CACZC,UAAU,CAAE,IAAI,CAChBC,gBAAgB,CAAE,IAAI,CACtBC,aAAa,CAAE,IAAI,CACnBC,aAAa,CAAE,IACjB,CAAC,CACDC,WAAW,CAAE,CACXC,oBAAoB,CAAE,IAAI,CAC1BL,UAAU,CAAE,IAAI,CAChBM,KAAK,CAAE,IACT,CACF,CAAC,CAAC,CAEF3G,QAAQ,CAAC2D,OAAO,CAAGC,KAAK,CAExB;AACA,GAAI,CAAAgD,UAAU,CACd,GAAIpG,SAAS,GAAK,aAAa,CAAE,CAC/BoG,UAAU,CAAGhD,KAAK,CAACiD,oBAAoB,CAAC,CACtCC,OAAO,CAAE,SAAS,CAClBC,SAAS,CAAE,SAAS,CACpBC,aAAa,CAAE,KAAK,CACpBC,WAAW,CAAE,SAAS,CACtBC,aAAa,CAAE,SACjB,CAAC,CAAC,CACJ,CAAC,IAAM,IAAI1G,SAAS,GAAK,MAAM,CAAE,CAC/BoG,UAAU,CAAGhD,KAAK,CAACuD,aAAa,CAAC,CAC/B9F,KAAK,CAAE,SAAS,CAChB+F,SAAS,CAAE,CAAC,CACZC,sBAAsB,CAAE,IAAI,CAC5BC,qBAAqB,CAAE,CAAC,CACxBC,0BAA0B,CAAE,SAAS,CACrCC,8BAA8B,CAAE,SAClC,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIhH,SAAS,GAAK,MAAM,CAAE,CAC/BoG,UAAU,CAAGhD,KAAK,CAAC6D,aAAa,CAAC,CAC/BC,QAAQ,CAAE,yBAAyB,CACnCC,WAAW,CAAE,yBAAyB,CACtCC,SAAS,CAAE,SAAS,CACpBR,SAAS,CAAE,CAAC,CACZC,sBAAsB,CAAE,IAC1B,CAAC,CAAC,CACJ,CAEApH,oBAAoB,CAAC0D,OAAO,CAAGiD,UAAU,CAEzC;AACA,KAAM,CAAAiB,YAAY,CAAGjE,KAAK,CAACkE,kBAAkB,CAAC,CAC5CzG,KAAK,CAAE,0BAA0B,CACjC0G,WAAW,CAAE,CACXhE,IAAI,CAAE,QACR,CAAC,CACDiE,YAAY,CAAE,QAChB,CAAC,CAAC,CAEF9H,eAAe,CAACyD,OAAO,CAAGkE,YAAY,CAEtC;AACAjE,KAAK,CAACqE,UAAU,CAAC,QAAQ,CAAC,CAACC,YAAY,CAAC,CACtC9C,YAAY,CAAE,CACZC,GAAG,CAAE,GAAG,CACRC,MAAM,CAAE,CACV,CAAC,CACDZ,IAAI,CAAE/F,cAAc,CAACwJ,UACvB,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzB,GAAIrI,iBAAiB,CAAC4D,OAAO,CAAE,CAC7BC,KAAK,CAACsE,YAAY,CAAC,CACjBrD,KAAK,CAAE9E,iBAAiB,CAAC4D,OAAO,CAACwC,WACnC,CAAC,CAAC,CACJ,CACF,CAAC,CAEDkC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,CAAEF,YAAY,CAAC,CAE/C,MAAO,IAAM,CACXC,MAAM,CAACE,mBAAmB,CAAC,QAAQ,CAAEH,YAAY,CAAC,CAClD;AACAI,MAAM,CAACC,MAAM,CAACtI,mBAAmB,CAACwD,OAAO,CAAC,CAAC+E,OAAO,CAACC,MAAM,EAAI,CAC3D,GAAIA,MAAM,EAAI/E,KAAK,CAAE,CACnB,GAAI,CACFA,KAAK,CAACgF,YAAY,CAACD,MAAM,CAAC,CAC5B,CAAE,MAAOE,CAAC,CAAE,CACV;AAAA,CAEJ,CACF,CAAC,CAAC,CACF1I,mBAAmB,CAACwD,OAAO,CAAG,CAAC,CAAC,CAChC,GAAIC,KAAK,CAAE,CACTA,KAAK,CAACkF,MAAM,CAAC,CAAC,CAChB,CACF,CAAC,CACH,CAAC,CAAE,CAAClJ,MAAM,CAAEY,SAAS,CAAC,CAAC,CAEvB;AACArC,SAAS,CAAC,IAAM,CACd,GAAI,CAACiC,SAAS,EAAI,CAACH,oBAAoB,CAAC0D,OAAO,CAAE,OAEjD,GAAI,CAAAoF,EAAE,CACN,GAAI,CAAAC,gBAAgB,CAEpB,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAI,CACF;AACAF,EAAE,CAAG,GAAI,CAAAG,SAAS,CAAC,iCAAiCvJ,MAAM,EAAE,CAAC,CAE7DoJ,EAAE,CAACI,MAAM,CAAG,IAAM,CAChBC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACvD,CAAC,CAEDN,EAAE,CAACO,SAAS,CAAIC,KAAK,EAAK,CACxB,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC,CACnC,GAAIA,IAAI,CAACzF,IAAI,GAAK,cAAc,CAAE,CAChC4F,mBAAmB,CAACH,IAAI,CAAC,CAC3B,CAAC,IAAM,IAAIA,IAAI,CAACzF,IAAI,GAAK,QAAQ,CAAE,CACjC6F,cAAc,CAACJ,IAAI,CAACK,MAAM,CAAC,CAC3B,GAAI/J,gBAAgB,CAAE,CACpBA,gBAAgB,CAAC0J,IAAI,CAACK,MAAM,CAAC,CAC/B,CACF,CAAC,IAAM,IAAIL,IAAI,CAACzF,IAAI,GAAK,aAAa,CAAE,CACtC+F,iBAAiB,CAACN,IAAI,CAACO,MAAM,CAAC,CAChC,CACF,CAAC,CAEDhB,EAAE,CAACiB,OAAO,CAAIC,KAAK,EAAK,CACtBb,OAAO,CAACa,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CAC1C,CAAC,CAEDlB,EAAE,CAACmB,OAAO,CAAG,IAAM,CACjBd,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC,CACjEL,gBAAgB,CAAGmB,UAAU,CAAClB,gBAAgB,CAAE,IAAI,CAAC,CACvD,CAAC,CACH,CAAE,MAAOgB,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpDG,mBAAmB,CAAC,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAAA,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAC,eAAe,CAAGlH,UAAU,CAACmH,IAAI,CAACC,EAAE,EAAIA,EAAE,CAACnH,KAAK,GAAK9C,SAAS,CAAC,CACrE,KAAM,CAAAkK,QAAQ,CAAG,CAAAH,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEjH,KAAK,GAAI,IAAI,CAE/C;AACA,KAAM,CAAAqH,kBAAkB,CAAG,KAAM,CAAAC,KAAK,CACpC,GAAG7K,UAAU,iCAAiCF,MAAM,uBAAuB6K,QAAQ,EACrF,CAAC,CAED,GAAIC,kBAAkB,CAACE,EAAE,CAAE,CACzB,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAAH,kBAAkB,CAACI,IAAI,CAAC,CAAC,CAEtD,GAAID,cAAc,SAAdA,cAAc,WAAdA,cAAc,CAAEpB,IAAI,EAAIsB,KAAK,CAACC,OAAO,CAACH,cAAc,CAACpB,IAAI,CAAC,CAAE,CAC9D,KAAM,CAAAwB,QAAQ,CAAGJ,cAAc,CAACpB,IAAI,CAACyB,GAAG,CAACC,IAAI,GAAK,CAChDtF,IAAI,CAAEuF,IAAI,CAACC,KAAK,CAAC,GAAI,CAAAtF,IAAI,CAACoF,IAAI,CAACrF,IAAI,CAAC,CAACwF,OAAO,CAAC,CAAC,CAAG,IAAI,CAAC,CACtDC,IAAI,CAAEC,UAAU,CAACL,IAAI,CAACI,IAAI,CAAC,CAC3BE,IAAI,CAAED,UAAU,CAACL,IAAI,CAACM,IAAI,CAAC,CAC3BC,GAAG,CAAEF,UAAU,CAACL,IAAI,CAACO,GAAG,CAAC,CACzBC,KAAK,CAAEH,UAAU,CAACL,IAAI,CAACQ,KAAK,CAAC,CAC7BvJ,MAAM,CAAEoJ,UAAU,CAACL,IAAI,CAAC/I,MAAM,EAAIgJ,IAAI,CAACC,KAAK,CAAC,IAAI,CAAGD,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CAC3E,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACjG,IAAI,CAAGkG,CAAC,CAAClG,IAAI,CAAC,CAEnC,GAAIoF,QAAQ,CAACe,MAAM,CAAG,CAAC,CAAE,CACvB7I,YAAY,CAAC8H,QAAQ,CAAC,CACtBgB,iBAAiB,CAAChB,QAAQ,CAAC,CAC3BnI,eAAe,CAACmI,QAAQ,CAACA,QAAQ,CAACe,MAAM,CAAG,CAAC,CAAC,CAACL,KAAK,CAAC,CACpD,OACF,CACF,CACF,CAEA;AACA,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAvB,KAAK,CAAC,GAAG7K,UAAU,sBAAsB,CAAC,CACjE,GAAIoM,QAAQ,CAACtB,EAAE,CAAE,CACf,KAAM,CAAAnB,IAAI,CAAG,KAAM,CAAAyC,QAAQ,CAACpB,IAAI,CAAC,CAAC,CAClChI,eAAe,CAAC2G,IAAI,CAAC0C,aAAa,CAAC,CAEnC;AACA,KAAM,CAAAC,GAAG,CAAGrG,IAAI,CAACqG,GAAG,CAAC,CAAC,CAAG,IAAI,CAC7B,KAAM,CAAAC,QAAQ,CAAGC,oBAAoB,CAAC7C,IAAI,CAAC0C,aAAa,CAAEC,GAAG,CAAC,CAC9DjJ,YAAY,CAACkJ,QAAQ,CAAC,CACtBJ,iBAAiB,CAACI,QAAQ,CAAC,CAC7B,CAAC,IAAM,CACL,KAAM,IAAI,CAAAE,KAAK,CAAC,+BAA+B,CAAC,CAClD,CAEF,CAAE,MAAOrC,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpD;AACA,KAAM,CAAAkC,GAAG,CAAGrG,IAAI,CAACqG,GAAG,CAAC,CAAC,CAAG,IAAI,CAC7B,KAAM,CAAAC,QAAQ,CAAGC,oBAAoB,CAAC,KAAK,CAAEF,GAAG,CAAC,CACjDjJ,YAAY,CAACkJ,QAAQ,CAAC,CACtBJ,iBAAiB,CAACI,QAAQ,CAAC,CAC3BvJ,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED;AACAoG,gBAAgB,CAAC,CAAC,CAElB;AACAmB,mBAAmB,CAAC,CAAC,CAErB,MAAO,IAAM,CACX,GAAIrB,EAAE,CAAE,CACNA,EAAE,CAAC2C,KAAK,CAAC,CAAC,CACZ,CACA,GAAI1C,gBAAgB,CAAE,CACpBuD,YAAY,CAACvD,gBAAgB,CAAC,CAChC,CACF,CAAC,CACH,CAAC,CAAE,CAAC5I,SAAS,CAAEE,SAAS,CAAEX,MAAM,CAAC,CAAC,CAElC;AACA,KAAM,CAAA0M,oBAAoB,CAAGA,CAACzJ,YAAY,CAAE4J,OAAO,GAAK,CACtD,KAAM,CAAAhD,IAAI,CAAG,EAAE,CACf,GAAI,CAAAiD,KAAK,CAAG7J,YAAY,CAAGuI,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAG,GAAG,CAC9C,KAAM,CAAAtB,eAAe,CAAGlH,UAAU,CAACmH,IAAI,CAACC,EAAE,EAAIA,EAAE,CAACnH,KAAK,GAAK9C,SAAS,CAAC,CACrE,KAAM,CAAAoM,eAAe,CAAG,CAAArC,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAE/G,OAAO,GAAI,GAAG,CACvD,KAAM,CAAAqJ,OAAO,CAAGxB,IAAI,CAACyB,GAAG,CAAC,GAAG,CAAEzB,IAAI,CAACC,KAAK,CAAC,KAAK,CAAGsB,eAAe,CAAC,CAAC,CAAE;AAEpE,IAAK,GAAI,CAAAG,CAAC,CAAGF,OAAO,CAAEE,CAAC,EAAI,CAAC,CAAEA,CAAC,EAAE,CAAE,CACjC,KAAM,CAAAjH,IAAI,CAAG4G,OAAO,CAAIK,CAAC,CAAGH,eAAgB,CAC5C,KAAM,CAAApB,IAAI,CAAGmB,KAAK,CAClB,KAAM,CAAAK,UAAU,CAAG,CAAC,CAAG3B,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAG,CAAC,CAAE;AAC1C,KAAM,CAAAH,IAAI,CAAGF,IAAI,CAAGH,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAGmB,UAAU,CAC9C,KAAM,CAAArB,GAAG,CAAGH,IAAI,CAAGH,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAGmB,UAAU,CAC7C,KAAM,CAAApB,KAAK,CAAGD,GAAG,CAAGN,IAAI,CAACQ,MAAM,CAAC,CAAC,EAAIH,IAAI,CAAGC,GAAG,CAAC,CAChD,KAAM,CAAAtJ,MAAM,CAAGgJ,IAAI,CAACC,KAAK,CAAC,GAAG,CAAGD,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAG,IAAI,CAAC,CAErDnC,IAAI,CAACuD,IAAI,CAAC,CACRnH,IAAI,CAAEuF,IAAI,CAACC,KAAK,CAACxF,IAAI,CAAC,CACtB0F,IAAI,CAAEC,UAAU,CAACD,IAAI,CAAC0B,OAAO,CAAC,CAAC,CAAC,CAAC,CACjCxB,IAAI,CAAED,UAAU,CAACC,IAAI,CAACwB,OAAO,CAAC,CAAC,CAAC,CAAC,CACjCvB,GAAG,CAAEF,UAAU,CAACE,GAAG,CAACuB,OAAO,CAAC,CAAC,CAAC,CAAC,CAC/BtB,KAAK,CAAEH,UAAU,CAACG,KAAK,CAACsB,OAAO,CAAC,CAAC,CAAC,CAAC,CACnC7K,MAAM,CAAEA,MACV,CAAC,CAAC,CAEF;AACAsK,KAAK,CAAGf,KAAK,CAAG,CAACP,IAAI,CAACQ,MAAM,CAAC,CAAC,CAAG,GAAG,EAAI,CAAC,CAC3C,CAEA,MAAO,CAAAnC,IAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAwC,iBAAiB,CAAG1N,WAAW,CAAE0M,QAAQ,EAAK,CAClD,GAAI,CAAC/K,oBAAoB,CAAC0D,OAAO,EAAI,CAACzD,eAAe,CAACyD,OAAO,CAAE,OAE/D;AACA,GAAInD,SAAS,GAAK,aAAa,CAAE,CAC/BP,oBAAoB,CAAC0D,OAAO,CAACsJ,OAAO,CAACjC,QAAQ,CAAC,CAChD,CAAC,IAAM,IAAIxK,SAAS,GAAK,MAAM,CAAE,CAC/B,KAAM,CAAA0M,QAAQ,CAAGlC,QAAQ,CAACC,GAAG,CAACC,IAAI,GAAK,CACrCtF,IAAI,CAAEsF,IAAI,CAACtF,IAAI,CACfxC,KAAK,CAAE8H,IAAI,CAACQ,KACd,CAAC,CAAC,CAAC,CACHzL,oBAAoB,CAAC0D,OAAO,CAACsJ,OAAO,CAACC,QAAQ,CAAC,CAChD,CAAC,IAAM,IAAI1M,SAAS,GAAK,MAAM,CAAE,CAC/B,KAAM,CAAA2M,QAAQ,CAAGnC,QAAQ,CAACC,GAAG,CAACC,IAAI,GAAK,CACrCtF,IAAI,CAAEsF,IAAI,CAACtF,IAAI,CACfxC,KAAK,CAAE8H,IAAI,CAACQ,KACd,CAAC,CAAC,CAAC,CACHzL,oBAAoB,CAAC0D,OAAO,CAACsJ,OAAO,CAACE,QAAQ,CAAC,CAChD,CAEA;AACA,GAAInM,UAAU,CAACmB,MAAM,CAAChB,OAAO,CAAE,CAC7B,KAAM,CAAAiM,UAAU,CAAGpC,QAAQ,CAACC,GAAG,CAACC,IAAI,GAAK,CACvCtF,IAAI,CAAEsF,IAAI,CAACtF,IAAI,CACfxC,KAAK,CAAE8H,IAAI,CAAC/I,MAAM,CAClBd,KAAK,CAAGb,SAAS,GAAK,aAAa,CAChC0K,IAAI,CAACQ,KAAK,EAAIR,IAAI,CAACI,IAAI,CAAG,yBAAyB,CAAG,wBAAwB,CAC/E,0BACJ,CAAC,CAAC,CAAC,CACHpL,eAAe,CAACyD,OAAO,CAACsJ,OAAO,CAACG,UAAU,CAAC,CAC7C,CAEA;AACAC,gBAAgB,CAACrC,QAAQ,CAAC,CAC5B,CAAC,CAAE,CAACxK,SAAS,CAAEQ,UAAU,CAAC,CAAC,CAE3B;AACA,KAAM,CAAA2I,mBAAmB,CAAGrL,WAAW,CAAEgP,SAAS,EAAK,CACrD,GAAI,CAACrN,oBAAoB,CAAC0D,OAAO,CAAE,OAEnC,KAAM,CAAA4J,WAAW,CAAGpC,IAAI,CAACC,KAAK,CAACtF,IAAI,CAACqG,GAAG,CAAC,CAAC,CAAG,IAAI,CAAC,CACjD,KAAM,CAAAqB,QAAQ,CAAG,CACf5H,IAAI,CAAE2H,WAAW,CACjB,GAAGD,SACL,CAAC,CAED,GAAI9M,SAAS,GAAK,aAAa,CAAE,CAC/BP,oBAAoB,CAAC0D,OAAO,CAAC8J,MAAM,CAACD,QAAQ,CAAC,CAC/C,CAAC,IAAM,CACLvN,oBAAoB,CAAC0D,OAAO,CAAC8J,MAAM,CAAC,CAClC7H,IAAI,CAAE2H,WAAW,CACjBnK,KAAK,CAAEkK,SAAS,CAAC5B,KACnB,CAAC,CAAC,CACJ,CAEA7I,eAAe,CAACyK,SAAS,CAAC5B,KAAK,CAAC,CAChC3I,cAAc,CAACuK,SAAS,CAACI,MAAM,EAAI,CAAC,CAAC,CACvC,CAAC,CAAE,CAAClN,SAAS,CAAC,CAAC,CAEf;AACA,KAAM,CAAAsJ,iBAAiB,CAAGxL,WAAW,CAAEyL,MAAM,EAAK,CAChD9G,cAAc,CAAC8G,MAAM,CAAC,CAEtB,GAAI,CAAC9J,oBAAoB,CAAC0D,OAAO,CAAE,OAEnC;AACAoG,MAAM,CAACrB,OAAO,CAACiF,KAAK,EAAI,CACtB;AACAvE,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEsE,KAAK,CAAC,CACpC,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAN,gBAAgB,CAAG/O,WAAW,CAAE0M,QAAQ,EAAK,CACjD,GAAI,CAAChL,QAAQ,CAAC2D,OAAO,EAAI,CAACqH,QAAQ,CAACe,MAAM,CAAE,OAE3C;AACAvD,MAAM,CAACoF,IAAI,CAACzN,mBAAmB,CAACwD,OAAO,CAAC,CAAC+E,OAAO,CAAClF,GAAG,EAAI,CACtD,KAAM,CAAAmF,MAAM,CAAGxI,mBAAmB,CAACwD,OAAO,CAACH,GAAG,CAAC,CAC/C,GAAImF,MAAM,CAAE,CACV,GAAI,CACF3I,QAAQ,CAAC2D,OAAO,CAACiF,YAAY,CAACD,MAAM,CAAC,CACvC,CAAE,MAAOE,CAAC,CAAE,CACV;AAAA,CAEJ,CACF,CAAC,CAAC,CACF1I,mBAAmB,CAACwD,OAAO,CAAG,CAAC,CAAC,CAEhC;AACA6E,MAAM,CAACqF,OAAO,CAAC7M,UAAU,CAAC,CAAC0H,OAAO,CAACoF,KAAA,EAAmB,IAAlB,CAACtK,GAAG,CAAEuK,MAAM,CAAC,CAAAD,KAAA,CAC/C,GAAI,CAACC,MAAM,CAAC5M,OAAO,EAAI,CAAC4M,MAAM,CAAC3M,OAAO,CAAE,OAExC,GAAI,CACF,GAAIoC,GAAG,GAAK,OAAO,EAAIA,GAAG,GAAK,OAAO,CAAE,CACtC,KAAM,CAAAlC,MAAM,CAAGkC,GAAG,GAAK,OAAO,CAAG,EAAE,CAAG,EAAE,CACxC,KAAM,CAAAwK,OAAO,CAAGC,YAAY,CAACjD,QAAQ,CAAE1J,MAAM,CAAC,CAC9C,GAAI0M,OAAO,CAACjC,MAAM,CAAG,CAAC,CAAE,CACtB,KAAM,CAAApD,MAAM,CAAG3I,QAAQ,CAAC2D,OAAO,CAACwD,aAAa,CAAC,CAC5C9F,KAAK,CAAE0M,MAAM,CAAC1M,KAAK,CACnB+F,SAAS,CAAE,CAAC,CACZ8G,KAAK,CAAE,OAAO5M,MAAM,EAAE,CACtB6M,gBAAgB,CAAE,IAAI,CACtBC,gBAAgB,CAAE,KACpB,CAAC,CAAC,CACFzF,MAAM,CAACsE,OAAO,CAACe,OAAO,CAAC,CACvB7N,mBAAmB,CAACwD,OAAO,CAACH,GAAG,CAAC,CAAGmF,MAAM,CAC3C,CACF,CAAC,IAAM,IAAInF,GAAG,GAAK,OAAO,EAAIA,GAAG,GAAK,OAAO,CAAE,CAC7C,KAAM,CAAAlC,MAAM,CAAGyM,MAAM,CAACzM,MAAM,CAC5B,KAAM,CAAA+M,OAAO,CAAGC,YAAY,CAACtD,QAAQ,CAAE1J,MAAM,CAAC,CAC9C,GAAI+M,OAAO,CAACtC,MAAM,CAAG,CAAC,CAAE,CACtB,KAAM,CAAApD,MAAM,CAAG3I,QAAQ,CAAC2D,OAAO,CAACwD,aAAa,CAAC,CAC5C9F,KAAK,CAAE0M,MAAM,CAAC1M,KAAK,CACnB+F,SAAS,CAAE,CAAC,CACZ8G,KAAK,CAAE,OAAO5M,MAAM,EAAE,CACtB6M,gBAAgB,CAAE,IAAI,CACtBC,gBAAgB,CAAE,KACpB,CAAC,CAAC,CACFzF,MAAM,CAACsE,OAAO,CAACoB,OAAO,CAAC,CACvBlO,mBAAmB,CAACwD,OAAO,CAACH,GAAG,CAAC,CAAGmF,MAAM,CAC3C,CACF,CAAC,IAAM,IAAInF,GAAG,GAAK,WAAW,CAAE,CAC9B,KAAM,CAAA+K,aAAa,CAAGC,uBAAuB,CAACxD,QAAQ,CAAE+C,MAAM,CAACzM,MAAM,CAAEyM,MAAM,CAAC7L,MAAM,CAAC,CACrF,GAAIqM,aAAa,CAACE,KAAK,CAAC1C,MAAM,CAAG,CAAC,CAAE,CAClC;AACA,KAAM,CAAA2C,WAAW,CAAG1O,QAAQ,CAAC2D,OAAO,CAACwD,aAAa,CAAC,CACjD9F,KAAK,CAAE0M,MAAM,CAAC1M,KAAK,CACnB+F,SAAS,CAAE,CAAC,CACZ8G,KAAK,CAAE,UAAU,CACjBC,gBAAgB,CAAE,KAAK,CACvBC,gBAAgB,CAAE,KACpB,CAAC,CAAC,CACFM,WAAW,CAACzB,OAAO,CAACsB,aAAa,CAACE,KAAK,CAAC,CAExC;AACA,KAAM,CAAAE,WAAW,CAAG3O,QAAQ,CAAC2D,OAAO,CAACwD,aAAa,CAAC,CACjD9F,KAAK,CAAE0M,MAAM,CAAC1M,KAAK,CACnB+F,SAAS,CAAE,CAAC,CACZ8G,KAAK,CAAE,UAAU,CACjBC,gBAAgB,CAAE,KAAK,CACvBC,gBAAgB,CAAE,KACpB,CAAC,CAAC,CACFO,WAAW,CAAC1B,OAAO,CAACsB,aAAa,CAACK,KAAK,CAAC,CAExC;AACA,KAAM,CAAAC,YAAY,CAAG7O,QAAQ,CAAC2D,OAAO,CAACwD,aAAa,CAAC,CAClD9F,KAAK,CAAE0M,MAAM,CAAC1M,KAAK,CACnB+F,SAAS,CAAE,CAAC,CACZ8G,KAAK,CAAE,WAAW,CAClBC,gBAAgB,CAAE,KAAK,CACvBC,gBAAgB,CAAE,KACpB,CAAC,CAAC,CACFS,YAAY,CAAC5B,OAAO,CAACsB,aAAa,CAACO,MAAM,CAAC,CAE1C3O,mBAAmB,CAACwD,OAAO,CAACH,GAAG,CAAC,CAAG,CAAEiL,KAAK,CAAEC,WAAW,CAAEE,KAAK,CAAED,WAAW,CAAEG,MAAM,CAAED,YAAa,CAAC,CACrG,CACF,CACA;AACF,CAAE,MAAO5E,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,0BAA0BzG,GAAG,GAAG,CAAEyG,KAAK,CAAC,CACxD,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,CAACjJ,UAAU,CAAC,CAAC,CAEhB;AACA,KAAM,CAAAiN,YAAY,CAAGA,CAACzE,IAAI,CAAElI,MAAM,GAAK,CACrC,KAAM,CAAAyN,MAAM,CAAG,EAAE,CACjB,IAAK,GAAI,CAAAlC,CAAC,CAAGvL,MAAM,CAAG,CAAC,CAAEuL,CAAC,CAAGrD,IAAI,CAACuC,MAAM,CAAEc,CAAC,EAAE,CAAE,CAC7C,GAAI,CAAAmC,GAAG,CAAG,CAAC,CACX,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG3N,MAAM,CAAE2N,CAAC,EAAE,CAAE,CAC/BD,GAAG,EAAIxF,IAAI,CAACqD,CAAC,CAAGoC,CAAC,CAAC,CAACvD,KAAK,CAC1B,CACAqD,MAAM,CAAChC,IAAI,CAAC,CACVnH,IAAI,CAAE4D,IAAI,CAACqD,CAAC,CAAC,CAACjH,IAAI,CAClBxC,KAAK,CAAEmI,UAAU,CAAC,CAACyD,GAAG,CAAG1N,MAAM,EAAE0L,OAAO,CAAC,CAAC,CAAC,CAC7C,CAAC,CAAC,CACJ,CACA,MAAO,CAAA+B,MAAM,CACf,CAAC,CAED,KAAM,CAAAT,YAAY,CAAGA,CAAC9E,IAAI,CAAElI,MAAM,GAAK,KAAA4N,MAAA,CACrC,KAAM,CAAAH,MAAM,CAAG,EAAE,CACjB,KAAM,CAAAI,UAAU,CAAG,CAAC,EAAI7N,MAAM,CAAG,CAAC,CAAC,CACnC,GAAI,CAAA8N,GAAG,CAAG,EAAAF,MAAA,CAAA1F,IAAI,CAAC,CAAC,CAAC,UAAA0F,MAAA,iBAAPA,MAAA,CAASxD,KAAK,GAAI,CAAC,CAE7B,IAAK,GAAI,CAAAmB,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGrD,IAAI,CAACuC,MAAM,CAAEc,CAAC,EAAE,CAAE,CACpC,GAAIA,CAAC,GAAK,CAAC,CAAE,CACXuC,GAAG,CAAG5F,IAAI,CAACqD,CAAC,CAAC,CAACnB,KAAK,CACrB,CAAC,IAAM,CACL0D,GAAG,CAAI5F,IAAI,CAACqD,CAAC,CAAC,CAACnB,KAAK,CAAGyD,UAAU,CAAKC,GAAG,EAAI,CAAC,CAAGD,UAAU,CAAE,CAC/D,CAEAJ,MAAM,CAAChC,IAAI,CAAC,CACVnH,IAAI,CAAE4D,IAAI,CAACqD,CAAC,CAAC,CAACjH,IAAI,CAClBxC,KAAK,CAAEmI,UAAU,CAAC6D,GAAG,CAACpC,OAAO,CAAC,CAAC,CAAC,CAClC,CAAC,CAAC,CACJ,CACA,MAAO,CAAA+B,MAAM,CACf,CAAC,CAED,KAAM,CAAAP,uBAAuB,CAAGA,CAAChF,IAAI,CAAElI,MAAM,CAAEY,MAAM,GAAK,CACxD,KAAM,CAAA8L,OAAO,CAAGC,YAAY,CAACzE,IAAI,CAAElI,MAAM,CAAC,CAC1C,KAAM,CAAAmN,KAAK,CAAG,EAAE,CAChB,KAAM,CAAAG,KAAK,CAAG,EAAE,CAChB,KAAM,CAAAE,MAAM,CAAG,EAAE,CAEjB,IAAK,GAAI,CAAAjC,CAAC,CAAGvL,MAAM,CAAG,CAAC,CAAEuL,CAAC,CAAGrD,IAAI,CAACuC,MAAM,CAAEc,CAAC,EAAE,CAAE,KAAAwC,QAAA,CAC7C,KAAM,CAAAC,QAAQ,CAAG,EAAAD,QAAA,CAAArB,OAAO,CAACnB,CAAC,CAAGvL,MAAM,CAAG,CAAC,CAAC,UAAA+N,QAAA,iBAAvBA,QAAA,CAAyBjM,KAAK,GAAI,CAAC,CAEpD;AACA,GAAI,CAAA4L,GAAG,CAAG,CAAC,CACX,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG3N,MAAM,CAAE2N,CAAC,EAAE,CAAE,CAC/B,KAAM,CAAAM,IAAI,CAAG/F,IAAI,CAACqD,CAAC,CAAGoC,CAAC,CAAC,CAACvD,KAAK,CAAG4D,QAAQ,CACzCN,GAAG,EAAIO,IAAI,CAAGA,IAAI,CACpB,CACA,KAAM,CAAAC,QAAQ,CAAGR,GAAG,CAAG1N,MAAM,CAC7B,KAAM,CAAAmO,iBAAiB,CAAGtE,IAAI,CAACuE,IAAI,CAACF,QAAQ,CAAC,CAE7C,KAAM,CAAAG,UAAU,CAAGL,QAAQ,CAAIG,iBAAiB,CAAGvN,MAAO,CAC1D,KAAM,CAAA0N,UAAU,CAAGN,QAAQ,CAAIG,iBAAiB,CAAGvN,MAAO,CAE1DuM,KAAK,CAAC1B,IAAI,CAAC,CAAEnH,IAAI,CAAE4D,IAAI,CAACqD,CAAC,CAAC,CAACjH,IAAI,CAAExC,KAAK,CAAEmI,UAAU,CAACoE,UAAU,CAAC3C,OAAO,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAC5E4B,KAAK,CAAC7B,IAAI,CAAC,CAAEnH,IAAI,CAAE4D,IAAI,CAACqD,CAAC,CAAC,CAACjH,IAAI,CAAExC,KAAK,CAAEmI,UAAU,CAACqE,UAAU,CAAC5C,OAAO,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAC5E8B,MAAM,CAAC/B,IAAI,CAAC,CAAEnH,IAAI,CAAE4D,IAAI,CAACqD,CAAC,CAAC,CAACjH,IAAI,CAAExC,KAAK,CAAEmI,UAAU,CAAC+D,QAAQ,CAACtC,OAAO,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAC7E,CAEA,MAAO,CAAEyB,KAAK,CAAEG,KAAK,CAAEE,MAAO,CAAC,CACjC,CAAC,CAED,KAAM,CAAAe,YAAY,CAAGA,CAACrG,IAAI,CAAElI,MAAM,GAAK,CACrC;AACA;AACA,MAAO,EAAE,CACX,CAAC,CAED,KAAM,CAAAwO,aAAa,CAAGA,CAACtG,IAAI,CAAE1H,UAAU,CAAEC,UAAU,CAAEC,YAAY,GAAK,CACpE;AACA;AACA,MAAO,CAAEH,IAAI,CAAE,EAAE,CAAEgI,MAAM,CAAE,EAAE,CAAEkG,SAAS,CAAE,EAAG,CAAC,CAChD,CAAC,CAED;AACA,KAAM,CAAAnG,cAAc,CAAGtL,WAAW,CAAEuL,MAAM,EAAK,CAC7C,GAAI,CAAC5J,oBAAoB,CAAC0D,OAAO,CAAE,OAEnC,KAAM,CAAAqM,MAAM,CAAG,CACbpK,IAAI,CAAEiE,MAAM,CAACjE,IAAI,EAAIuF,IAAI,CAACC,KAAK,CAACtF,IAAI,CAACqG,GAAG,CAAC,CAAC,CAAG,IAAI,CAAC,CAClD8D,QAAQ,CAAEpG,MAAM,CAAC9F,IAAI,GAAK,KAAK,CAAG,UAAU,CAAG,UAAU,CACzD1C,KAAK,CAAEwI,MAAM,CAAC9F,IAAI,GAAK,KAAK,CAAG,SAAS,CAAG,SAAS,CACpDmM,KAAK,CAAErG,MAAM,CAAC9F,IAAI,GAAK,KAAK,CAAG,SAAS,CAAG,WAAW,CACtDoM,IAAI,CAAE,GAAGtG,MAAM,CAAC9F,IAAI,CAACqM,WAAW,CAAC,CAAC,GAAGvG,MAAM,CAAC4C,KAAK,CAAG,MAAM5C,MAAM,CAAC4C,KAAK,EAAE,CAAG,EAAE,GAAG5C,MAAM,CAACwG,UAAU,CAAG,KAAKlF,IAAI,CAACmF,KAAK,CAACzG,MAAM,CAACwG,UAAU,CAAG,GAAG,CAAC,IAAI,CAAG,EAAE,EAAE,CACvJE,IAAI,CAAE1G,MAAM,CAAC2G,QAAQ,EAAI,CAC3B,CAAC,CAED7N,eAAe,CAAC8N,IAAI,EAAI,CACtB,KAAM,CAAAC,UAAU,CAAG,CAAC,GAAGD,IAAI,CAAET,MAAM,CAAC,CACpC/P,oBAAoB,CAAC0D,OAAO,CAACgN,UAAU,CAACD,UAAU,CAAC,CACnD,MAAO,CAAAA,UAAU,CACnB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAE,eAAe,CAAGtS,WAAW,CAAEuS,SAAS,EAAK,CACjD5P,aAAa,CAACwP,IAAI,GAAK,CACrB,GAAGA,IAAI,CACP,CAACI,SAAS,EAAG,CACX,GAAGJ,IAAI,CAACI,SAAS,CAAC,CAClB1P,OAAO,CAAE,CAACsP,IAAI,CAACI,SAAS,CAAC,CAAC1P,OAC5B,CACF,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAA2P,yBAAyB,CAAGxS,WAAW,CAAEuS,SAAS,EAAK,CAC3D5P,aAAa,CAACwP,IAAI,GAAK,CACrB,GAAGA,IAAI,CACP,CAACI,SAAS,EAAG,CACX,GAAGJ,IAAI,CAACI,SAAS,CAAC,CAClBzP,OAAO,CAAE,CAACqP,IAAI,CAACI,SAAS,CAAC,CAACzP,OAC5B,CACF,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAA2P,eAAe,CAAGzS,WAAW,CAAE0S,YAAY,EAAK,CACpDzQ,YAAY,CAACyQ,YAAY,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,eAAe,CAAG3S,WAAW,CAAE4S,OAAO,EAAK,CAC/CzQ,YAAY,CAACyQ,OAAO,CAAC,CACvB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAC,kBAAkB,CAAG5N,mBAAmB,CAAC6N,MAAM,CAACP,SAAS,EAC7DA,SAAS,CAACpN,IAAI,CAAC4N,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACxQ,mBAAmB,CAACuQ,WAAW,CAAC,CAAC,CACzE,CAAC,CAED;AACA,KAAM,CAAAE,sBAAsB,CAAGjT,WAAW,CAAEkT,YAAY,EAAK,CAC3DvQ,aAAa,CAACwP,IAAI,GAAK,CACrB,GAAGA,IAAI,CACP,CAACe,YAAY,EAAG,CACd,GAAGf,IAAI,CAACe,YAAY,CAAC,CACrBrQ,OAAO,CAAE,IAAI,CACbC,OAAO,CAAE,IACX,CACF,CAAC,CAAC,CAAC,CACHP,sBAAsB,CAAC,KAAK,CAAC,CAC7BE,sBAAsB,CAAC,EAAE,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEvB,KAAA,QAAKiS,SAAS,CAAC,oEAAoE,CAAAC,QAAA,eAEjFlS,KAAA,QAAKiS,SAAS,CAAC,4EAA4E,CAAAC,QAAA,eACzFlS,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1ClS,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpS,IAAA,OAAImS,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAE/R,MAAM,CAAK,CAAC,cAC9DL,IAAA,QAAKmS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAEzCvO,UAAU,CAAC8H,GAAG,CAAEV,EAAE,eACjBjL,IAAA,WAEEqS,OAAO,CAAEA,CAAA,GAAMZ,eAAe,CAACxG,EAAE,CAACnH,KAAK,CAAE,CACzCqO,SAAS,CAAE,+CACTnR,SAAS,GAAKiK,EAAE,CAACnH,KAAK,CAClB,wBAAwB,CACxB,6CAA6C,EAChD,CAAAsO,QAAA,CAEFnH,EAAE,CAAClH,KAAK,EARJkH,EAAE,CAACnH,KASF,CACT,CAAC,CACC,CAAC,EACH,CAAC,CAELR,YAAY,eACXpD,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1ClS,KAAA,SAAMiS,SAAS,CAAC,8BAA8B,CAAAC,QAAA,EAAC,GAC5C,CAAC9O,YAAY,CAACgP,cAAc,CAACC,SAAS,CAAE,CAAEC,qBAAqB,CAAE,CAAC,CAAEC,qBAAqB,CAAE,CAAE,CAAC,CAAC,EAC5F,CAAC,cACPvS,KAAA,SAAMiS,SAAS,CAAE,yCACf3O,WAAW,EAAI,CAAC,CAAG,gBAAgB,CAAG,cAAc,EACnD,CAAA4O,QAAA,eACDpS,IAAA,SAAMmS,SAAS,CAAE,QAAQ3O,WAAW,EAAI,CAAC,CAAG,GAAG,CAAG,GAAG,EAAG,CAAA4O,QAAA,CACrD5O,WAAW,EAAI,CAAC,CAAG,GAAG,CAAG,GAAG,CACzB,CAAC,CACNA,WAAW,EAAI,CAAC,CAAG,GAAG,CAAG,EAAE,CAAEA,WAAW,CAACkK,OAAO,CAAC,CAAC,CAAC,EAChD,CAAC,EACJ,CACN,EACE,CAAC,cAENxN,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAE1CpS,IAAA,QAAKmS,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC9C,CAAC,aAAa,CAAE,MAAM,CAAE,MAAM,CAAC,CAACzG,GAAG,CAAElH,IAAI,eACxCzE,IAAA,WAEEqS,OAAO,CAAEA,CAAA,GAAMV,eAAe,CAAClN,IAAI,CAAE,CACrC0N,SAAS,CAAE,oCACTjR,SAAS,GAAKuD,IAAI,CACd,wBAAwB,CACxB,6CAA6C,EAChD,CACHmK,KAAK,CAAEnK,IAAI,CAACiO,MAAM,CAAC,CAAC,CAAC,CAAC5B,WAAW,CAAC,CAAC,CAAGrM,IAAI,CAACkO,KAAK,CAAC,CAAC,CAAE,CAAAP,QAAA,cAEpDpS,IAAA,CAACT,YAAY,EAAC4S,SAAS,CAAC,SAAS,CAAE,CAAC,EAT/B1N,IAUC,CACT,CAAC,CACC,CAAC,cAGNzE,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAMhR,mBAAmB,CAAC,CAACD,gBAAgB,CAAE,CACtD+Q,SAAS,CAAE,oCACT/Q,gBAAgB,CACZ,wBAAwB,CACxB,6CAA6C,EAChD,CACHwN,KAAK,CAAC,eAAe,CAAAwD,QAAA,cAErBpS,IAAA,CAACF,yBAAyB,EAACqS,SAAS,CAAC,SAAS,CAAE,CAAC,CAC3C,CAAC,cAGTnS,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAM9Q,sBAAsB,CAAC,CAACD,mBAAmB,CAAE,CAC5D6Q,SAAS,CAAC,8EAA8E,CACxFvD,KAAK,CAAC,eAAe,CAAAwD,QAAA,cAErBpS,IAAA,CAACL,QAAQ,EAACwS,SAAS,CAAC,SAAS,CAAE,CAAC,CAC1B,CAAC,cAGTnS,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAMtR,YAAY,CAAC,CAACD,SAAS,CAAE,CACxCqR,SAAS,CAAC,gEAAgE,CAC1EvD,KAAK,CAAE9N,SAAS,CAAG,OAAO,CAAG,QAAS,CAAAsR,QAAA,CAErCtR,SAAS,cACRd,IAAA,CAACP,SAAS,EAAC0S,SAAS,CAAC,oBAAoB,CAAE,CAAC,cAE5CnS,IAAA,CAACR,QAAQ,EAAC2S,SAAS,CAAC,oBAAoB,CAAE,CAC3C,CACK,CAAC,cAGTnS,IAAA,WACEmS,SAAS,CAAC,8EAA8E,CACxFvD,KAAK,CAAC,UAAU,CAAAwD,QAAA,cAEhBpS,IAAA,CAACV,aAAa,EAAC6S,SAAS,CAAC,SAAS,CAAE,CAAC,CAC/B,CAAC,EACN,CAAC,EACH,CAAC,CAGL7Q,mBAAmB,eAClBpB,KAAA,QAAKiS,SAAS,CAAC,+FAA+F,CAAAC,QAAA,eAC5GlS,KAAA,QAAKiS,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CpS,IAAA,CAACN,mBAAmB,EAACyS,SAAS,CAAC,uBAAuB,CAAE,CAAC,cACzDnS,IAAA,UACEyE,IAAI,CAAC,MAAM,CACXmO,WAAW,CAAC,sBAAsB,CAClC9O,KAAK,CAAEtC,mBAAoB,CAC3BqR,QAAQ,CAAGtJ,CAAC,EAAK9H,sBAAsB,CAAC8H,CAAC,CAACuJ,MAAM,CAAChP,KAAK,CAAE,CACxDqO,SAAS,CAAC,qGAAqG,CAC/GY,SAAS,MACV,CAAC,cACF/S,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAM9Q,sBAAsB,CAAC,KAAK,CAAE,CAC7C4Q,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAC3C,QAED,CAAQ,CAAC,EACN,CAAC,cACNpS,IAAA,QAAKmS,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CACtCP,kBAAkB,CAAClG,GAAG,CAAE4F,SAAS,eAChCrR,KAAA,QAAyBiS,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvCpS,IAAA,QAAKmS,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAEb,SAAS,CAACnN,QAAQ,CAAM,CAAC,cACtEpE,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAMJ,sBAAsB,CAACV,SAAS,CAACrN,GAAG,CAAE,CACrDiO,SAAS,CAAC,mEAAmE,CAAAC,QAAA,CAE5Eb,SAAS,CAACpN,IAAI,CACT,CAAC,GAPDoN,SAAS,CAACrN,GAQf,CACN,CAAC,CACC,CAAC,EACH,CACN,cAGDlE,IAAA,QAAKmS,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDpS,IAAA,QAAKmS,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClClJ,MAAM,CAACqF,OAAO,CAAC7M,UAAU,CAAC,CAACiK,GAAG,CAACqH,KAAA,MAAC,CAAC9O,GAAG,CAAEuK,MAAM,CAAC,CAAAuE,KAAA,OAC5C,CAAAvE,MAAM,CAAC5M,OAAO,eACZ3B,KAAA,QAAeiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACpDlS,KAAA,WACEmS,OAAO,CAAEA,CAAA,GAAMf,eAAe,CAACpN,GAAG,CAAE,CACpCiO,SAAS,CAAE,2DACT1D,MAAM,CAAC5M,OAAO,EAAI4M,MAAM,CAAC3M,OAAO,CAC5B,wCAAwC,CACxC,oEAAoE,EACvE,CACHkD,KAAK,CAAE,CAAEY,WAAW,CAAE6I,MAAM,CAAC3M,OAAO,CAAG2M,MAAM,CAAC1M,KAAK,CAAGwQ,SAAU,CAAE,CAAAH,QAAA,eAElEpS,IAAA,SACEmS,SAAS,CAAC,wCAAwC,CAClDnN,KAAK,CAAE,CAAEiO,eAAe,CAAExE,MAAM,CAAC1M,KAAM,CAAE,CAC1C,CAAC,CACDmC,GAAG,CAAC4M,WAAW,CAAC,CAAC,EACZ,CAAC,cACT9Q,IAAA,WACEqS,OAAO,CAAEA,CAAA,GAAMb,yBAAyB,CAACtN,GAAG,CAAE,CAC9CiO,SAAS,CAAC,oCAAoC,CAC9CvD,KAAK,CAAEH,MAAM,CAAC3M,OAAO,CAAG,MAAM,CAAG,MAAO,CAAAsQ,QAAA,CAEvC3D,MAAM,CAAC3M,OAAO,cACb9B,IAAA,CAACJ,OAAO,EAACuS,SAAS,CAAC,SAAS,CAAE,CAAC,cAE/BnS,IAAA,CAACH,YAAY,EAACsS,SAAS,CAAC,SAAS,CAAE,CACpC,CACK,CAAC,GA1BDjO,GA2BL,CACN,EACF,CAAC,CACC,CAAC,CACH,CAAC,cAGNhE,KAAA,QAAKiS,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BpS,IAAA,QACEkT,GAAG,CAAEzS,iBAAkB,CACvB0R,SAAS,CAAC,kBAAkB,CAC7B,CAAC,CAGDzO,WAAW,CAACiI,GAAG,CAAC,CAAC0C,KAAK,CAAE8E,KAAK,gBAC5BjT,KAAA,QAEEiS,SAAS,CAAC,qEAAqE,CAC/EnN,KAAK,CAAE,CAAEe,GAAG,CAAE,GAAGsI,KAAK,CAAC+E,SAAS,EAAI,EAAE,GAAI,CAAE,CAAAhB,QAAA,EAC7C,QACO,CAAC/D,KAAK,CAAC5J,IAAI,CAAC,KAAG,CAAC4J,KAAK,CAAClB,KAAK,GAJ5BgG,KAKF,CACN,CAAC,EACC,CAAC,cAGNnT,IAAA,QAAKmS,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACvDlS,KAAA,QAAKiS,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACtElS,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CpS,IAAA,SAAAoS,QAAA,CAAM,MAAI,CAAM,CAAC,cACjBlS,KAAA,SAAAkS,QAAA,EAAM,YAAU,CAACpR,SAAS,EAAO,CAAC,cAClCd,KAAA,SAAMiS,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eACjCpS,IAAA,SAAMmS,SAAS,CAAC,wCAAwC,CAAO,CAAC,YAElE,EAAM,CAAC,EACJ,CAAC,cACNjS,KAAA,QAAKiS,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1ClS,KAAA,SAAAkS,QAAA,EAAM,WAAS,CAAChP,YAAY,CAACqJ,MAAM,EAAO,CAAC,cAC3CvM,KAAA,SAAAkS,QAAA,EAAM,UAAQ,CAAC1O,WAAW,CAAC+I,MAAM,EAAO,CAAC,cACzCvM,KAAA,SAAAkS,QAAA,EAAM,QAAM,CAAC,GAAI,CAAA5L,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAO,CAAC,EACjD,CAAC,EACH,CAAC,CACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtG,YAAY,CAE3B;AACA,KAAM,CAAAkT,WAAW,CAAIlG,KAAK,EAAK,CAC7B,MAAO,IAAI,CAAAmG,IAAI,CAACC,YAAY,CAAC,OAAO,CAAE,CACpCvO,KAAK,CAAE,UAAU,CACjBwO,QAAQ,CAAE,KAAK,CACfhB,qBAAqB,CAAE,CAAC,CACxBC,qBAAqB,CAAE,CACzB,CAAC,CAAC,CAACgB,MAAM,CAACtG,KAAK,CAAC,CAClB,CAAC,CAED;AACA,OAASkG,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}